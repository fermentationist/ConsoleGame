!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){(function(e,o){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",f=1,d=2,p=4,m=1,g=2,v=1,y=2,b=4,_=8,w=16,k=32,x=64,I=128,M=256,$=512,j=30,T="...",E=800,O=16,C=1,S=2,A=1/0,z=9007199254740991,P=1.7976931348623157e308,L=NaN,B=4294967295,R=B-1,Y=B>>>1,G=[["ary",I],["bind",v],["bindKey",y],["curry",_],["curryRight",w],["flip",$],["partial",k],["partialRight",x],["rearg",M]],D="[object Arguments]",W="[object Array]",F="[object AsyncFunction]",N="[object Boolean]",U="[object Date]",H="[object DOMException]",q="[object Error]",K="[object Function]",Z="[object GeneratorFunction]",J="[object Map]",V="[object Number]",Q="[object Null]",X="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",oe="[object String]",re="[object Symbol]",ie="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",fe="[object Int8Array]",de="[object Int16Array]",pe="[object Int32Array]",me="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",be=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ke=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,Ie=RegExp(ke.source),Me=RegExp(xe.source),$e=/<%-([\s\S]+?)%>/g,je=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Se=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(Se.source),ze=/^\s+|\s+$/g,Pe=/^\s+/,Le=/\s+$/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Re=/\{\n\/\* \[wrapped with (.+)\] \*/,Ye=/,? & /,Ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,Ne=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Xe+"]",nt="["+Qe+"]",ot="\\d+",rt="[\\u2700-\\u27bf]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",at="[^\\ud800-\\udfff"+Xe+ot+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",ut="[^\\ud800-\\udfff]",lt="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ft="(?:"+it+"|"+at+")",dt="(?:"+ht+"|"+at+")",pt="(?:"+nt+"|"+st+")"+"?",mt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[ut,lt,ct].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),gt="(?:"+[rt,lt,ct].join("|")+")"+mt,vt="(?:"+[ut+nt+"?",nt,lt,ct,et].join("|")+")",yt=RegExp("['’]","g"),bt=RegExp(nt,"g"),_t=RegExp(st+"(?="+st+")|"+vt+mt,"g"),wt=RegExp([ht+"?"+it+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,ht,"$"].join("|")+")",dt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,ht+ft,"$"].join("|")+")",ht+"?"+ft+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ot,gt].join("|"),"g"),kt=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),xt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,It=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mt=-1,$t={};$t[ce]=$t[he]=$t[fe]=$t[de]=$t[pe]=$t[me]=$t[ge]=$t[ve]=$t[ye]=!0,$t[D]=$t[W]=$t[ue]=$t[N]=$t[le]=$t[U]=$t[q]=$t[K]=$t[J]=$t[V]=$t[X]=$t[te]=$t[ne]=$t[oe]=$t[ae]=!1;var jt={};jt[D]=jt[W]=jt[ue]=jt[le]=jt[N]=jt[U]=jt[ce]=jt[he]=jt[fe]=jt[de]=jt[pe]=jt[J]=jt[V]=jt[X]=jt[te]=jt[ne]=jt[oe]=jt[re]=jt[me]=jt[ge]=jt[ve]=jt[ye]=!0,jt[q]=jt[K]=jt[ae]=!1;var Tt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Et=parseFloat,Ot=parseInt,Ct="object"==typeof e&&e&&e.Object===Object&&e,St="object"==typeof self&&self&&self.Object===Object&&self,At=Ct||St||Function("return this")(),zt=t&&!t.nodeType&&t,Pt=zt&&"object"==typeof o&&o&&!o.nodeType&&o,Lt=Pt&&Pt.exports===zt,Bt=Lt&&Ct.process,Rt=function(){try{var e=Pt&&Pt.require&&Pt.require("util").types;return e||Bt&&Bt.binding&&Bt.binding("util")}catch(e){}}(),Yt=Rt&&Rt.isArrayBuffer,Gt=Rt&&Rt.isDate,Dt=Rt&&Rt.isMap,Wt=Rt&&Rt.isRegExp,Ft=Rt&&Rt.isSet,Nt=Rt&&Rt.isTypedArray;function Ut(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ht(e,t,n,o){for(var r=-1,i=null==e?0:e.length;++r<i;){var a=e[r];t(o,a,n(a),e)}return o}function qt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}function Kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Zt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function Jt(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i}function Vt(e,t){return!!(null==e?0:e.length)&&un(e,t,0)>-1}function Qt(e,t,n){for(var o=-1,r=null==e?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}function Xt(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}function en(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}function tn(e,t,n,o){var r=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++r]);++r<i;)n=t(n,e[r],r,e);return n}function nn(e,t,n,o){var r=null==e?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function on(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var rn=fn("length");function an(e,t,n){var o;return n(e,function(e,n,r){if(t(e,n,r))return o=n,!1}),o}function sn(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function un(e,t,n){return t==t?function(e,t,n){var o=n-1,r=e.length;for(;++o<r;)if(e[o]===t)return o;return-1}(e,t,n):sn(e,cn,n)}function ln(e,t,n,o){for(var r=n-1,i=e.length;++r<i;)if(o(e[r],t))return r;return-1}function cn(e){return e!=e}function hn(e,t){var n=null==e?0:e.length;return n?mn(e,t)/n:L}function fn(e){return function(t){return null==t?i:t[e]}}function dn(e){return function(t){return null==e?i:e[t]}}function pn(e,t,n,o,r){return r(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)}),n}function mn(e,t){for(var n,o=-1,r=e.length;++o<r;){var a=t(e[o]);a!==i&&(n=n===i?a:n+a)}return n}function gn(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}function vn(e){return function(t){return e(t)}}function yn(e,t){return Xt(t,function(t){return e[t]})}function bn(e,t){return e.has(t)}function _n(e,t){for(var n=-1,o=e.length;++n<o&&un(t,e[n],0)>-1;);return n}function wn(e,t){for(var n=e.length;n--&&un(t,e[n],0)>-1;);return n}var kn=dn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function In(e){return"\\"+Tt[e]}function Mn(e){return kt.test(e)}function $n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,o){n[++t]=[o,e]}),n}function jn(e,t){return function(n){return e(t(n))}}function Tn(e,t){for(var n=-1,o=e.length,r=0,i=[];++n<o;){var a=e[n];a!==t&&a!==h||(e[n]=h,i[r++]=n)}return i}function En(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function On(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Cn(e){return Mn(e)?function(e){var t=_t.lastIndex=0;for(;_t.test(e);)++t;return t}(e):rn(e)}function Sn(e){return Mn(e)?function(e){return e.match(_t)||[]}(e):function(e){return e.split("")}(e)}var An=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var zn=function e(t){var n,o=(t=null==t?At:zn.defaults(At.Object(),t,zn.pick(At,It))).Array,r=t.Date,Qe=t.Error,Xe=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,ot=t.String,rt=t.TypeError,it=o.prototype,at=Xe.prototype,st=tt.prototype,ut=t["__core-js_shared__"],lt=at.toString,ct=st.hasOwnProperty,ht=0,ft=(n=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",dt=st.toString,pt=lt.call(tt),mt=At._,gt=nt("^"+lt.call(ct).replace(Se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Lt?t.Buffer:i,_t=t.Symbol,kt=t.Uint8Array,Tt=vt?vt.allocUnsafe:i,Ct=jn(tt.getPrototypeOf,tt),St=tt.create,zt=st.propertyIsEnumerable,Pt=it.splice,Bt=_t?_t.isConcatSpreadable:i,Rt=_t?_t.iterator:i,rn=_t?_t.toStringTag:i,dn=function(){try{var e=Yi(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Pn=t.clearTimeout!==At.clearTimeout&&t.clearTimeout,Ln=r&&r.now!==At.Date.now&&r.now,Bn=t.setTimeout!==At.setTimeout&&t.setTimeout,Rn=et.ceil,Yn=et.floor,Gn=tt.getOwnPropertySymbols,Dn=vt?vt.isBuffer:i,Wn=t.isFinite,Fn=it.join,Nn=jn(tt.keys,tt),Un=et.max,Hn=et.min,qn=r.now,Kn=t.parseInt,Zn=et.random,Jn=it.reverse,Vn=Yi(t,"DataView"),Qn=Yi(t,"Map"),Xn=Yi(t,"Promise"),eo=Yi(t,"Set"),to=Yi(t,"WeakMap"),no=Yi(tt,"create"),oo=to&&new to,ro={},io=ha(Vn),ao=ha(Qn),so=ha(Xn),uo=ha(eo),lo=ha(to),co=_t?_t.prototype:i,ho=co?co.valueOf:i,fo=co?co.toString:i;function po(e){if(Ts(e)&&!vs(e)&&!(e instanceof yo)){if(e instanceof vo)return e;if(ct.call(e,"__wrapped__"))return fa(e)}return new vo(e)}var mo=function(){function e(){}return function(t){if(!js(t))return{};if(St)return St(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function go(){}function vo(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function yo(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function bo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function _o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function wo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ko(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wo;++t<n;)this.add(e[t])}function xo(e){var t=this.__data__=new _o(e);this.size=t.size}function Io(e,t){var n=vs(e),o=!n&&gs(e),r=!n&&!o&&ws(e),i=!n&&!o&&!r&&Ls(e),a=n||o||r||i,s=a?gn(e.length,ot):[],u=s.length;for(var l in e)!t&&!ct.call(e,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Hi(l,u))||s.push(l);return s}function Mo(e){var t=e.length;return t?e[kr(0,t-1)]:i}function $o(e,t){return ua(oi(e),Po(t,0,e.length))}function jo(e){return ua(oi(e))}function To(e,t,n){(n===i||ds(e[t],n))&&(n!==i||t in e)||Ao(e,t,n)}function Eo(e,t,n){var o=e[t];ct.call(e,t)&&ds(o,n)&&(n!==i||t in e)||Ao(e,t,n)}function Oo(e,t){for(var n=e.length;n--;)if(ds(e[n][0],t))return n;return-1}function Co(e,t,n,o){return Go(e,function(e,r,i){t(o,e,n(e),i)}),o}function So(e,t){return e&&ri(t,ru(t),e)}function Ao(e,t,n){"__proto__"==t&&dn?dn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function zo(e,t){for(var n=-1,r=t.length,a=o(r),s=null==e;++n<r;)a[n]=s?i:Xs(e,t[n]);return a}function Po(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function Lo(e,t,n,o,r,a){var s,u=t&f,l=t&d,c=t&p;if(n&&(s=r?n(e,o,r,a):n(e)),s!==i)return s;if(!js(e))return e;var h=vs(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ct.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return oi(e,s)}else{var m=Wi(e),g=m==K||m==Z;if(ws(e))return Vr(e,u);if(m==X||m==D||g&&!r){if(s=l||g?{}:Ni(e),!u)return l?function(e,t){return ri(e,Di(e),t)}(e,function(e,t){return e&&ri(t,iu(t),e)}(s,e)):function(e,t){return ri(e,Gi(e),t)}(e,So(s,e))}else{if(!jt[m])return r?e:{};s=function(e,t,n){var o,r=e.constructor;switch(t){case ue:return Qr(e);case N:case U:return new r(+e);case le:return function(e,t){var n=t?Qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case he:case fe:case de:case pe:case me:case ge:case ve:case ye:return Xr(e,n);case J:return new r;case V:case oe:return new r(e);case te:return function(e){var t=new e.constructor(e.source,Fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ne:return new r;case re:return o=e,ho?tt(ho.call(o)):{}}}(e,m,u)}}a||(a=new xo);var v=a.get(e);if(v)return v;a.set(e,s),As(e)?e.forEach(function(o){s.add(Lo(o,t,n,o,e,a))}):Es(e)&&e.forEach(function(o,r){s.set(r,Lo(o,t,n,r,e,a))});var y=h?i:(c?l?Si:Ci:l?iu:ru)(e);return qt(y||e,function(o,r){y&&(o=e[r=o]),Eo(s,r,Lo(o,t,n,r,e,a))}),s}function Bo(e,t,n){var o=n.length;if(null==e)return!o;for(e=tt(e);o--;){var r=n[o],a=t[r],s=e[r];if(s===i&&!(r in e)||!a(s))return!1}return!0}function Ro(e,t,n){if("function"!=typeof e)throw new rt(u);return ra(function(){e.apply(i,n)},t)}function Yo(e,t,n,o){var r=-1,i=Vt,s=!0,u=e.length,l=[],c=t.length;if(!u)return l;n&&(t=Xt(t,vn(n))),o?(i=Qt,s=!1):t.length>=a&&(i=bn,s=!1,t=new ko(t));e:for(;++r<u;){var h=e[r],f=null==n?h:n(h);if(h=o||0!==h?h:0,s&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(h)}else i(t,f,o)||l.push(h)}return l}po.templateSettings={escape:$e,evaluate:je,interpolate:Te,variable:"",imports:{_:po}},po.prototype=go.prototype,po.prototype.constructor=po,vo.prototype=mo(go.prototype),vo.prototype.constructor=vo,yo.prototype=mo(go.prototype),yo.prototype.constructor=yo,bo.prototype.clear=function(){this.__data__=no?no(null):{},this.size=0},bo.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},bo.prototype.get=function(e){var t=this.__data__;if(no){var n=t[e];return n===l?i:n}return ct.call(t,e)?t[e]:i},bo.prototype.has=function(e){var t=this.__data__;return no?t[e]!==i:ct.call(t,e)},bo.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=no&&t===i?l:t,this},_o.prototype.clear=function(){this.__data__=[],this.size=0},_o.prototype.delete=function(e){var t=this.__data__,n=Oo(t,e);return!(n<0||(n==t.length-1?t.pop():Pt.call(t,n,1),--this.size,0))},_o.prototype.get=function(e){var t=this.__data__,n=Oo(t,e);return n<0?i:t[n][1]},_o.prototype.has=function(e){return Oo(this.__data__,e)>-1},_o.prototype.set=function(e,t){var n=this.__data__,o=Oo(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},wo.prototype.clear=function(){this.size=0,this.__data__={hash:new bo,map:new(Qn||_o),string:new bo}},wo.prototype.delete=function(e){var t=Bi(this,e).delete(e);return this.size-=t?1:0,t},wo.prototype.get=function(e){return Bi(this,e).get(e)},wo.prototype.has=function(e){return Bi(this,e).has(e)},wo.prototype.set=function(e,t){var n=Bi(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},ko.prototype.add=ko.prototype.push=function(e){return this.__data__.set(e,l),this},ko.prototype.has=function(e){return this.__data__.has(e)},xo.prototype.clear=function(){this.__data__=new _o,this.size=0},xo.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xo.prototype.get=function(e){return this.__data__.get(e)},xo.prototype.has=function(e){return this.__data__.has(e)},xo.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _o){var o=n.__data__;if(!Qn||o.length<a-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new wo(o)}return n.set(e,t),this.size=n.size,this};var Go=si(Ko),Do=si(Zo,!0);function Wo(e,t){var n=!0;return Go(e,function(e,o,r){return n=!!t(e,o,r)}),n}function Fo(e,t,n){for(var o=-1,r=e.length;++o<r;){var a=e[o],s=t(a);if(null!=s&&(u===i?s==s&&!Ps(s):n(s,u)))var u=s,l=a}return l}function No(e,t){var n=[];return Go(e,function(e,o,r){t(e,o,r)&&n.push(e)}),n}function Uo(e,t,n,o,r){var i=-1,a=e.length;for(n||(n=Ui),r||(r=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?Uo(s,t-1,n,o,r):en(r,s):o||(r[r.length]=s)}return r}var Ho=ui(),qo=ui(!0);function Ko(e,t){return e&&Ho(e,t,ru)}function Zo(e,t){return e&&qo(e,t,ru)}function Jo(e,t){return Jt(t,function(t){return Is(e[t])})}function Vo(e,t){for(var n=0,o=(t=qr(t,e)).length;null!=e&&n<o;)e=e[ca(t[n++])];return n&&n==o?e:i}function Qo(e,t,n){var o=t(e);return vs(e)?o:en(o,n(e))}function Xo(e){return null==e?e===i?ie:Q:rn&&rn in tt(e)?function(e){var t=ct.call(e,rn),n=e[rn];try{e[rn]=i;var o=!0}catch(e){}var r=dt.call(e);return o&&(t?e[rn]=n:delete e[rn]),r}(e):function(e){return dt.call(e)}(e)}function er(e,t){return e>t}function tr(e,t){return null!=e&&ct.call(e,t)}function nr(e,t){return null!=e&&t in tt(e)}function or(e,t,n){for(var r=n?Qt:Vt,a=e[0].length,s=e.length,u=s,l=o(s),c=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Xt(f,vn(t))),c=Hn(f.length,c),l[u]=!n&&(t||a>=120&&f.length>=120)?new ko(u&&f):i}f=e[0];var d=-1,p=l[0];e:for(;++d<a&&h.length<c;){var m=f[d],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?bn(p,g):r(h,g,n))){for(u=s;--u;){var v=l[u];if(!(v?bn(v,g):r(e[u],g,n)))continue e}p&&p.push(g),h.push(m)}}return h}function rr(e,t,n){var o=null==(e=ta(e,t=qr(t,e)))?e:e[ca(xa(t))];return null==o?i:Ut(o,e,n)}function ir(e){return Ts(e)&&Xo(e)==D}function ar(e,t,n,o,r){return e===t||(null==e||null==t||!Ts(e)&&!Ts(t)?e!=e&&t!=t:function(e,t,n,o,r,a){var s=vs(e),u=vs(t),l=s?W:Wi(e),c=u?W:Wi(t),h=(l=l==D?X:l)==X,f=(c=c==D?X:c)==X,d=l==c;if(d&&ws(e)){if(!ws(t))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new xo),s||Ls(e)?Ei(e,t,n,o,r,a):function(e,t,n,o,r,i,a){switch(n){case le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ue:return!(e.byteLength!=t.byteLength||!i(new kt(e),new kt(t)));case N:case U:case V:return ds(+e,+t);case q:return e.name==t.name&&e.message==t.message;case te:case oe:return e==t+"";case J:var s=$n;case ne:var u=o&m;if(s||(s=En),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;o|=g,a.set(e,t);var c=Ei(s(e),s(t),o,r,i,a);return a.delete(e),c;case re:if(ho)return ho.call(e)==ho.call(t)}return!1}(e,t,l,n,o,r,a);if(!(n&m)){var p=h&&ct.call(e,"__wrapped__"),v=f&&ct.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,b=v?t.value():t;return a||(a=new xo),r(y,b,n,o,a)}}return!!d&&(a||(a=new xo),function(e,t,n,o,r,a){var s=n&m,u=Ci(e),l=u.length,c=Ci(t).length;if(l!=c&&!s)return!1;for(var h=l;h--;){var f=u[h];if(!(s?f in t:ct.call(t,f)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);for(var v=s;++h<l;){f=u[h];var y=e[f],b=t[f];if(o)var _=s?o(b,y,f,t,e,a):o(y,b,f,e,t,a);if(!(_===i?y===b||r(y,b,n,o,a):_)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var w=e.constructor,k=t.constructor;w!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k)&&(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,o,r,a))}(e,t,n,o,ar,r))}function sr(e,t,n,o){var r=n.length,a=r,s=!o;if(null==e)return!a;for(e=tt(e);r--;){var u=n[r];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<a;){var l=(u=n[r])[0],c=e[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var f=new xo;if(o)var d=o(c,h,l,e,t,f);if(!(d===i?ar(h,c,m|g,o,f):d))return!1}}return!0}function ur(e){return!(!js(e)||(t=e,ft&&ft in t))&&(Is(e)?gt:He).test(ha(e));var t}function lr(e){return"function"==typeof e?e:null==e?Ou:"object"==typeof e?vs(e)?mr(e[0],e[1]):pr(e):Yu(e)}function cr(e){if(!Vi(e))return Nn(e);var t=[];for(var n in tt(e))ct.call(e,n)&&"constructor"!=n&&t.push(n);return t}function hr(e){if(!js(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Vi(e),n=[];for(var o in e)("constructor"!=o||!t&&ct.call(e,o))&&n.push(o);return n}function fr(e,t){return e<t}function dr(e,t){var n=-1,r=bs(e)?o(e.length):[];return Go(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function pr(e){var t=Ri(e);return 1==t.length&&t[0][2]?Xi(t[0][0],t[0][1]):function(n){return n===e||sr(n,e,t)}}function mr(e,t){return Ki(e)&&Qi(t)?Xi(ca(e),t):function(n){var o=Xs(n,e);return o===i&&o===t?eu(n,e):ar(t,o,m|g)}}function gr(e,t,n,o,r){e!==t&&Ho(t,function(a,s){if(r||(r=new xo),js(a))!function(e,t,n,o,r,a,s){var u=na(e,n),l=na(t,n),c=s.get(l);if(c)To(e,n,c);else{var h=a?a(u,l,n+"",e,t,s):i,f=h===i;if(f){var d=vs(l),p=!d&&ws(l),m=!d&&!p&&Ls(l);h=l,d||p||m?vs(u)?h=u:_s(u)?h=oi(u):p?(f=!1,h=Vr(l,!0)):m?(f=!1,h=Xr(l,!0)):h=[]:Cs(l)||gs(l)?(h=u,gs(u)?h=Ns(u):js(u)&&!Is(u)||(h=Ni(l))):f=!1}f&&(s.set(l,h),r(h,l,o,a,s),s.delete(l)),To(e,n,h)}}(e,t,s,n,gr,o,r);else{var u=o?o(na(e,s),a,s+"",e,t,r):i;u===i&&(u=a),To(e,s,u)}},iu)}function vr(e,t){var n=e.length;if(n)return Hi(t+=t<0?n:0,n)?e[t]:i}function yr(e,t,n){t=t.length?Xt(t,function(e){return vs(e)?function(t){return Vo(t,1===e.length?e[0]:e)}:e}):[Ou];var o=-1;return t=Xt(t,vn(Li())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(dr(e,function(e,n,r){return{criteria:Xt(t,function(t){return t(e)}),index:++o,value:e}}),function(e,t){return function(e,t,n){for(var o=-1,r=e.criteria,i=t.criteria,a=r.length,s=n.length;++o<a;){var u=ei(r[o],i[o]);if(u){if(o>=s)return u;var l=n[o];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)})}function br(e,t,n){for(var o=-1,r=t.length,i={};++o<r;){var a=t[o],s=Vo(e,a);n(s,a)&&jr(i,qr(a,e),s)}return i}function _r(e,t,n,o){var r=o?ln:un,i=-1,a=t.length,s=e;for(e===t&&(t=oi(t)),n&&(s=Xt(e,vn(n)));++i<a;)for(var u=0,l=t[i],c=n?n(l):l;(u=r(s,c,u,o))>-1;)s!==e&&Pt.call(s,u,1),Pt.call(e,u,1);return e}function wr(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==i){var i=r;Hi(r)?Pt.call(e,r,1):Yr(e,r)}}return e}function kr(e,t){return e+Yn(Zn()*(t-e+1))}function xr(e,t){var n="";if(!e||t<1||t>z)return n;do{t%2&&(n+=e),(t=Yn(t/2))&&(e+=e)}while(t);return n}function Ir(e,t){return ia(ea(e,t,Ou),e+"")}function Mr(e){return Mo(du(e))}function $r(e,t){var n=du(e);return ua(n,Po(t,0,n.length))}function jr(e,t,n,o){if(!js(e))return e;for(var r=-1,a=(t=qr(t,e)).length,s=a-1,u=e;null!=u&&++r<a;){var l=ca(t[r]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var h=u[l];(c=o?o(h,l,u):i)===i&&(c=js(h)?h:Hi(t[r+1])?[]:{})}Eo(u,l,c),u=u[l]}return e}var Tr=oo?function(e,t){return oo.set(e,t),e}:Ou,Er=dn?function(e,t){return dn(e,"toString",{configurable:!0,enumerable:!1,value:ju(t),writable:!0})}:Ou;function Or(e){return ua(du(e))}function Cr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=o(i);++r<i;)a[r]=e[r+t];return a}function Sr(e,t){var n;return Go(e,function(e,o,r){return!(n=t(e,o,r))}),!!n}function Ar(e,t,n){var o=0,r=null==e?o:e.length;if("number"==typeof t&&t==t&&r<=Y){for(;o<r;){var i=o+r>>>1,a=e[i];null!==a&&!Ps(a)&&(n?a<=t:a<t)?o=i+1:r=i}return r}return zr(e,t,Ou,n)}function zr(e,t,n,o){var r=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,l=Ps(t),c=t===i;r<a;){var h=Yn((r+a)/2),f=n(e[h]),d=f!==i,p=null===f,m=f==f,g=Ps(f);if(s)var v=o||m;else v=c?m&&(o||d):u?m&&d&&(o||!p):l?m&&d&&!p&&(o||!g):!p&&!g&&(o?f<=t:f<t);v?r=h+1:a=h}return Hn(a,R)}function Pr(e,t){for(var n=-1,o=e.length,r=0,i=[];++n<o;){var a=e[n],s=t?t(a):a;if(!n||!ds(s,u)){var u=s;i[r++]=0===a?0:a}}return i}function Lr(e){return"number"==typeof e?e:Ps(e)?L:+e}function Br(e){if("string"==typeof e)return e;if(vs(e))return Xt(e,Br)+"";if(Ps(e))return fo?fo.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Rr(e,t,n){var o=-1,r=Vt,i=e.length,s=!0,u=[],l=u;if(n)s=!1,r=Qt;else if(i>=a){var c=t?null:xi(e);if(c)return En(c);s=!1,r=bn,l=new ko}else l=t?[]:u;e:for(;++o<i;){var h=e[o],f=t?t(h):h;if(h=n||0!==h?h:0,s&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),u.push(h)}else r(l,f,n)||(l!==u&&l.push(f),u.push(h))}return u}function Yr(e,t){return null==(e=ta(e,t=qr(t,e)))||delete e[ca(xa(t))]}function Gr(e,t,n,o){return jr(e,t,n(Vo(e,t)),o)}function Dr(e,t,n,o){for(var r=e.length,i=o?r:-1;(o?i--:++i<r)&&t(e[i],i,e););return n?Cr(e,o?0:i,o?i+1:r):Cr(e,o?i+1:0,o?r:i)}function Wr(e,t){var n=e;return n instanceof yo&&(n=n.value()),tn(t,function(e,t){return t.func.apply(t.thisArg,en([e],t.args))},n)}function Fr(e,t,n){var r=e.length;if(r<2)return r?Rr(e[0]):[];for(var i=-1,a=o(r);++i<r;)for(var s=e[i],u=-1;++u<r;)u!=i&&(a[i]=Yo(a[i]||s,e[u],t,n));return Rr(Uo(a,1),t,n)}function Nr(e,t,n){for(var o=-1,r=e.length,a=t.length,s={};++o<r;){var u=o<a?t[o]:i;n(s,e[o],u)}return s}function Ur(e){return _s(e)?e:[]}function Hr(e){return"function"==typeof e?e:Ou}function qr(e,t){return vs(e)?e:Ki(e,t)?[e]:la(Us(e))}var Kr=Ir;function Zr(e,t,n){var o=e.length;return n=n===i?o:n,!t&&n>=o?e:Cr(e,t,n)}var Jr=Pn||function(e){return At.clearTimeout(e)};function Vr(e,t){if(t)return e.slice();var n=e.length,o=Tt?Tt(n):new e.constructor(n);return e.copy(o),o}function Qr(e){var t=new e.constructor(e.byteLength);return new kt(t).set(new kt(e)),t}function Xr(e,t){var n=t?Qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ei(e,t){if(e!==t){var n=e!==i,o=null===e,r=e==e,a=Ps(e),s=t!==i,u=null===t,l=t==t,c=Ps(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||o&&s&&l||!n&&l||!r)return 1;if(!o&&!a&&!c&&e<t||c&&n&&r&&!o&&!a||u&&n&&r||!s&&r||!l)return-1}return 0}function ti(e,t,n,r){for(var i=-1,a=e.length,s=n.length,u=-1,l=t.length,c=Un(a-s,0),h=o(l+c),f=!r;++u<l;)h[u]=t[u];for(;++i<s;)(f||i<a)&&(h[n[i]]=e[i]);for(;c--;)h[u++]=e[i++];return h}function ni(e,t,n,r){for(var i=-1,a=e.length,s=-1,u=n.length,l=-1,c=t.length,h=Un(a-u,0),f=o(h+c),d=!r;++i<h;)f[i]=e[i];for(var p=i;++l<c;)f[p+l]=t[l];for(;++s<u;)(d||i<a)&&(f[p+n[s]]=e[i++]);return f}function oi(e,t){var n=-1,r=e.length;for(t||(t=o(r));++n<r;)t[n]=e[n];return t}function ri(e,t,n,o){var r=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=o?o(n[u],e[u],u,n,e):i;l===i&&(l=e[u]),r?Ao(n,u,l):Eo(n,u,l)}return n}function ii(e,t){return function(n,o){var r=vs(n)?Ht:Co,i=t?t():{};return r(n,e,Li(o,2),i)}}function ai(e){return Ir(function(t,n){var o=-1,r=n.length,a=r>1?n[r-1]:i,s=r>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(r--,a):i,s&&qi(n[0],n[1],s)&&(a=r<3?i:a,r=1),t=tt(t);++o<r;){var u=n[o];u&&e(t,u,o,a)}return t})}function si(e,t){return function(n,o){if(null==n)return n;if(!bs(n))return e(n,o);for(var r=n.length,i=t?r:-1,a=tt(n);(t?i--:++i<r)&&!1!==o(a[i],i,a););return n}}function ui(e){return function(t,n,o){for(var r=-1,i=tt(t),a=o(t),s=a.length;s--;){var u=a[e?s:++r];if(!1===n(i[u],u,i))break}return t}}function li(e){return function(t){var n=Mn(t=Us(t))?Sn(t):i,o=n?n[0]:t.charAt(0),r=n?Zr(n,1).join(""):t.slice(1);return o[e]()+r}}function ci(e){return function(t){return tn(Iu(gu(t).replace(yt,"")),e,"")}}function hi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=mo(e.prototype),o=e.apply(n,t);return js(o)?o:n}}function fi(e){return function(t,n,o){var r=tt(t);if(!bs(t)){var a=Li(n,3);t=ru(t),n=function(e){return a(r[e],e,r)}}var s=e(t,n,o);return s>-1?r[a?t[s]:s]:i}}function di(e){return Oi(function(t){var n=t.length,o=n,r=vo.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new rt(u);if(r&&!s&&"wrapper"==zi(a))var s=new vo([],!0)}for(o=s?o:n;++o<n;){var l=zi(a=t[o]),c="wrapper"==l?Ai(a):i;s=c&&Zi(c[0])&&c[1]==(I|_|k|M)&&!c[4].length&&1==c[9]?s[zi(c[0])].apply(s,c[3]):1==a.length&&Zi(a)?s[l]():s.thru(a)}return function(){var e=arguments,o=e[0];if(s&&1==e.length&&vs(o))return s.plant(o).value();for(var r=0,i=n?t[r].apply(this,e):o;++r<n;)i=t[r].call(this,i);return i}})}function pi(e,t,n,r,a,s,u,l,c,h){var f=t&I,d=t&v,p=t&y,m=t&(_|w),g=t&$,b=p?i:hi(e);return function v(){for(var y=arguments.length,_=o(y),w=y;w--;)_[w]=arguments[w];if(m)var k=Pi(v),x=function(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}(_,k);if(r&&(_=ti(_,r,a,m)),s&&(_=ni(_,s,u,m)),y-=x,m&&y<h){var I=Tn(_,k);return wi(e,t,pi,v.placeholder,n,_,I,l,c,h-y)}var M=d?n:this,$=p?M[e]:e;return y=_.length,l?_=function(e,t){for(var n=e.length,o=Hn(t.length,n),r=oi(e);o--;){var a=t[o];e[o]=Hi(a,n)?r[a]:i}return e}(_,l):g&&y>1&&_.reverse(),f&&c<y&&(_.length=c),this&&this!==At&&this instanceof v&&($=b||hi($)),$.apply(M,_)}}function mi(e,t){return function(n,o){return function(e,t,n,o){return Ko(e,function(e,r,i){t(o,n(e),r,i)}),o}(n,e,t(o),{})}}function gi(e,t){return function(n,o){var r;if(n===i&&o===i)return t;if(n!==i&&(r=n),o!==i){if(r===i)return o;"string"==typeof n||"string"==typeof o?(n=Br(n),o=Br(o)):(n=Lr(n),o=Lr(o)),r=e(n,o)}return r}}function vi(e){return Oi(function(t){return t=Xt(t,vn(Li())),Ir(function(n){var o=this;return e(t,function(e){return Ut(e,o,n)})})})}function yi(e,t){var n=(t=t===i?" ":Br(t)).length;if(n<2)return n?xr(t,e):t;var o=xr(t,Rn(e/Cn(t)));return Mn(t)?Zr(Sn(o),0,e).join(""):o.slice(0,e)}function bi(e){return function(t,n,r){return r&&"number"!=typeof r&&qi(t,n,r)&&(n=r=i),t=Gs(t),n===i?(n=t,t=0):n=Gs(n),function(e,t,n,r){for(var i=-1,a=Un(Rn((t-e)/(n||1)),0),s=o(a);a--;)s[r?a:++i]=e,e+=n;return s}(t,n,r=r===i?t<n?1:-1:Gs(r),e)}}function _i(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Fs(t),n=Fs(n)),e(t,n)}}function wi(e,t,n,o,r,a,s,u,l,c){var h=t&_;t|=h?k:x,(t&=~(h?x:k))&b||(t&=~(v|y));var f=[e,t,r,h?a:i,h?s:i,h?i:a,h?i:s,u,l,c],d=n.apply(i,f);return Zi(e)&&oa(d,f),d.placeholder=o,aa(d,e,t)}function ki(e){var t=et[e];return function(e,n){if(e=Fs(e),(n=null==n?0:Hn(Ds(n),292))&&Wn(e)){var o=(Us(e)+"e").split("e");return+((o=(Us(t(o[0]+"e"+(+o[1]+n)))+"e").split("e"))[0]+"e"+(+o[1]-n))}return t(e)}}var xi=eo&&1/En(new eo([,-0]))[1]==A?function(e){return new eo(e)}:Pu;function Ii(e){return function(t){var n=Wi(t);return n==J?$n(t):n==ne?On(t):function(e,t){return Xt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Mi(e,t,n,r,a,s,l,c){var f=t&y;if(!f&&"function"!=typeof e)throw new rt(u);var d=r?r.length:0;if(d||(t&=~(k|x),r=a=i),l=l===i?l:Un(Ds(l),0),c=c===i?c:Ds(c),d-=a?a.length:0,t&x){var p=r,m=a;r=a=i}var g=f?i:Ai(e),$=[e,t,n,r,a,p,m,s,l,c];if(g&&function(e,t){var n=e[1],o=t[1],r=n|o,i=r<(v|y|I),a=o==I&&n==_||o==I&&n==M&&e[7].length<=t[8]||o==(I|M)&&t[7].length<=t[8]&&n==_;if(!i&&!a)return e;o&v&&(e[2]=t[2],r|=n&v?0:b);var s=t[3];if(s){var u=e[3];e[3]=u?ti(u,s,t[4]):s,e[4]=u?Tn(e[3],h):t[4]}(s=t[5])&&(u=e[5],e[5]=u?ni(u,s,t[6]):s,e[6]=u?Tn(e[5],h):t[6]),(s=t[7])&&(e[7]=s),o&I&&(e[8]=null==e[8]?t[8]:Hn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}($,g),e=$[0],t=$[1],n=$[2],r=$[3],a=$[4],!(c=$[9]=$[9]===i?f?0:e.length:Un($[9]-d,0))&&t&(_|w)&&(t&=~(_|w)),t&&t!=v)j=t==_||t==w?function(e,t,n){var r=hi(e);return function a(){for(var s=arguments.length,u=o(s),l=s,c=Pi(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:Tn(u,c);return(s-=h.length)<n?wi(e,t,pi,a.placeholder,i,u,h,i,i,n-s):Ut(this&&this!==At&&this instanceof a?r:e,this,u)}}(e,t,c):t!=k&&t!=(v|k)||a.length?pi.apply(i,$):function(e,t,n,r){var i=t&v,a=hi(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=r.length,h=o(c+u),f=this&&this!==At&&this instanceof t?a:e;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++s];return Ut(f,i?n:this,h)}}(e,t,n,r);else var j=function(e,t,n){var o=t&v,r=hi(e);return function t(){return(this&&this!==At&&this instanceof t?r:e).apply(o?n:this,arguments)}}(e,t,n);return aa((g?Tr:oa)(j,$),e,t)}function $i(e,t,n,o){return e===i||ds(e,st[n])&&!ct.call(o,n)?t:e}function ji(e,t,n,o,r,a){return js(e)&&js(t)&&(a.set(t,e),gr(e,t,i,ji,a),a.delete(t)),e}function Ti(e){return Cs(e)?i:e}function Ei(e,t,n,o,r,a){var s=n&m,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var f=-1,d=!0,p=n&g?new ko:i;for(a.set(e,t),a.set(t,e);++f<u;){var v=e[f],y=t[f];if(o)var b=s?o(y,v,f,t,e,a):o(v,y,f,e,t,a);if(b!==i){if(b)continue;d=!1;break}if(p){if(!on(t,function(e,t){if(!bn(p,t)&&(v===e||r(v,e,n,o,a)))return p.push(t)})){d=!1;break}}else if(v!==y&&!r(v,y,n,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Oi(e){return ia(ea(e,i,ya),e+"")}function Ci(e){return Qo(e,ru,Gi)}function Si(e){return Qo(e,iu,Di)}var Ai=oo?function(e){return oo.get(e)}:Pu;function zi(e){for(var t=e.name+"",n=ro[t],o=ct.call(ro,t)?n.length:0;o--;){var r=n[o],i=r.func;if(null==i||i==e)return r.name}return t}function Pi(e){return(ct.call(po,"placeholder")?po:e).placeholder}function Li(){var e=po.iteratee||Cu;return e=e===Cu?lr:e,arguments.length?e(arguments[0],arguments[1]):e}function Bi(e,t){var n,o,r=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Ri(e){for(var t=ru(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,Qi(r)]}return t}function Yi(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return ur(n)?n:i}var Gi=Gn?function(e){return null==e?[]:(e=tt(e),Jt(Gn(e),function(t){return zt.call(e,t)}))}:Wu,Di=Gn?function(e){for(var t=[];e;)en(t,Gi(e)),e=Ct(e);return t}:Wu,Wi=Xo;function Fi(e,t,n){for(var o=-1,r=(t=qr(t,e)).length,i=!1;++o<r;){var a=ca(t[o]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++o!=r?i:!!(r=null==e?0:e.length)&&$s(r)&&Hi(a,r)&&(vs(e)||gs(e))}function Ni(e){return"function"!=typeof e.constructor||Vi(e)?{}:mo(Ct(e))}function Ui(e){return vs(e)||gs(e)||!!(Bt&&e&&e[Bt])}function Hi(e,t){var n=typeof e;return!!(t=null==t?z:t)&&("number"==n||"symbol"!=n&&Ke.test(e))&&e>-1&&e%1==0&&e<t}function qi(e,t,n){if(!js(n))return!1;var o=typeof t;return!!("number"==o?bs(n)&&Hi(t,n.length):"string"==o&&t in n)&&ds(n[t],e)}function Ki(e,t){if(vs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ps(e))||Oe.test(e)||!Ee.test(e)||null!=t&&e in tt(t)}function Zi(e){var t=zi(e),n=po[t];if("function"!=typeof n||!(t in yo.prototype))return!1;if(e===n)return!0;var o=Ai(n);return!!o&&e===o[0]}(Vn&&Wi(new Vn(new ArrayBuffer(1)))!=le||Qn&&Wi(new Qn)!=J||Xn&&"[object Promise]"!=Wi(Xn.resolve())||eo&&Wi(new eo)!=ne||to&&Wi(new to)!=ae)&&(Wi=function(e){var t=Xo(e),n=t==X?e.constructor:i,o=n?ha(n):"";if(o)switch(o){case io:return le;case ao:return J;case so:return"[object Promise]";case uo:return ne;case lo:return ae}return t});var Ji=ut?Is:Fu;function Vi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Qi(e){return e==e&&!js(e)}function Xi(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in tt(n))}}function ea(e,t,n){return t=Un(t===i?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Un(r.length-t,0),s=o(a);++i<a;)s[i]=r[t+i];i=-1;for(var u=o(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),Ut(e,this,u)}}function ta(e,t){return t.length<2?e:Vo(e,Cr(t,0,-1))}function na(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var oa=sa(Tr),ra=Bn||function(e,t){return At.setTimeout(e,t)},ia=sa(Er);function aa(e,t,n){var o=t+"";return ia(e,function(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(Be,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return qt(G,function(n){var o="_."+n[0];t&n[1]&&!Vt(e,o)&&e.push(o)}),e.sort()}(function(e){var t=e.match(Re);return t?t[1].split(Ye):[]}(o),n)))}function sa(e){var t=0,n=0;return function(){var o=qn(),r=O-(o-n);if(n=o,r>0){if(++t>=E)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ua(e,t){var n=-1,o=e.length,r=o-1;for(t=t===i?o:t;++n<t;){var a=kr(n,r),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var la=function(e){var t=ss(e,function(e){return n.size===c&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ce,function(e,n,o,r){t.push(o?r.replace(De,"$1"):n||e)}),t});function ca(e){if("string"==typeof e||Ps(e))return e;var t=e+"";return"0"==t&&1/e==-A?"-0":t}function ha(e){if(null!=e){try{return lt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fa(e){if(e instanceof yo)return e.clone();var t=new vo(e.__wrapped__,e.__chain__);return t.__actions__=oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var da=Ir(function(e,t){return _s(e)?Yo(e,Uo(t,1,_s,!0)):[]}),pa=Ir(function(e,t){var n=xa(t);return _s(n)&&(n=i),_s(e)?Yo(e,Uo(t,1,_s,!0),Li(n,2)):[]}),ma=Ir(function(e,t){var n=xa(t);return _s(n)&&(n=i),_s(e)?Yo(e,Uo(t,1,_s,!0),i,n):[]});function ga(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=null==n?0:Ds(n);return r<0&&(r=Un(o+r,0)),sn(e,Li(t,3),r)}function va(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=o-1;return n!==i&&(r=Ds(n),r=n<0?Un(o+r,0):Hn(r,o-1)),sn(e,Li(t,3),r,!0)}function ya(e){return null!=e&&e.length?Uo(e,1):[]}function ba(e){return e&&e.length?e[0]:i}var _a=Ir(function(e){var t=Xt(e,Ur);return t.length&&t[0]===e[0]?or(t):[]}),wa=Ir(function(e){var t=xa(e),n=Xt(e,Ur);return t===xa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?or(n,Li(t,2)):[]}),ka=Ir(function(e){var t=xa(e),n=Xt(e,Ur);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?or(n,i,t):[]});function xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ia=Ir(Ma);function Ma(e,t){return e&&e.length&&t&&t.length?_r(e,t):e}var $a=Oi(function(e,t){var n=null==e?0:e.length,o=zo(e,t);return wr(e,Xt(t,function(e){return Hi(e,n)?+e:e}).sort(ei)),o});function ja(e){return null==e?e:Jn.call(e)}var Ta=Ir(function(e){return Rr(Uo(e,1,_s,!0))}),Ea=Ir(function(e){var t=xa(e);return _s(t)&&(t=i),Rr(Uo(e,1,_s,!0),Li(t,2))}),Oa=Ir(function(e){var t=xa(e);return t="function"==typeof t?t:i,Rr(Uo(e,1,_s,!0),i,t)});function Ca(e){if(!e||!e.length)return[];var t=0;return e=Jt(e,function(e){if(_s(e))return t=Un(e.length,t),!0}),gn(t,function(t){return Xt(e,fn(t))})}function Sa(e,t){if(!e||!e.length)return[];var n=Ca(e);return null==t?n:Xt(n,function(e){return Ut(t,i,e)})}var Aa=Ir(function(e,t){return _s(e)?Yo(e,t):[]}),za=Ir(function(e){return Fr(Jt(e,_s))}),Pa=Ir(function(e){var t=xa(e);return _s(t)&&(t=i),Fr(Jt(e,_s),Li(t,2))}),La=Ir(function(e){var t=xa(e);return t="function"==typeof t?t:i,Fr(Jt(e,_s),i,t)}),Ba=Ir(Ca);var Ra=Ir(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,Sa(e,n)});function Ya(e){var t=po(e);return t.__chain__=!0,t}function Ga(e,t){return t(e)}var Da=Oi(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(t){return zo(t,e)};return!(t>1||this.__actions__.length)&&o instanceof yo&&Hi(n)?((o=o.slice(n,+n+(t?1:0))).__actions__.push({func:Ga,args:[r],thisArg:i}),new vo(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(r)});var Wa=ii(function(e,t,n){ct.call(e,n)?++e[n]:Ao(e,n,1)});var Fa=fi(ga),Na=fi(va);function Ua(e,t){return(vs(e)?qt:Go)(e,Li(t,3))}function Ha(e,t){return(vs(e)?Kt:Do)(e,Li(t,3))}var qa=ii(function(e,t,n){ct.call(e,n)?e[n].push(t):Ao(e,n,[t])});var Ka=Ir(function(e,t,n){var r=-1,i="function"==typeof t,a=bs(e)?o(e.length):[];return Go(e,function(e){a[++r]=i?Ut(t,e,n):rr(e,t,n)}),a}),Za=ii(function(e,t,n){Ao(e,n,t)});function Ja(e,t){return(vs(e)?Xt:dr)(e,Li(t,3))}var Va=ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Qa=Ir(function(e,t){if(null==e)return[];var n=t.length;return n>1&&qi(e,t[0],t[1])?t=[]:n>2&&qi(t[0],t[1],t[2])&&(t=[t[0]]),yr(e,Uo(t,1),[])}),Xa=Ln||function(){return At.Date.now()};function es(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Mi(e,I,i,i,i,i,t)}function ts(e,t){var n;if("function"!=typeof t)throw new rt(u);return e=Ds(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var ns=Ir(function(e,t,n){var o=v;if(n.length){var r=Tn(n,Pi(ns));o|=k}return Mi(e,o,t,n,r)}),os=Ir(function(e,t,n){var o=v|y;if(n.length){var r=Tn(n,Pi(os));o|=k}return Mi(t,o,e,n,r)});function rs(e,t,n){var o,r,a,s,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new rt(u);function m(t){var n=o,a=r;return o=r=i,h=t,s=e.apply(a,n)}function g(e){var n=e-c;return c===i||n>=t||n<0||d&&e-h>=a}function v(){var e=Xa();if(g(e))return y(e);l=ra(v,function(e){var n=t-(e-c);return d?Hn(n,a-(e-h)):n}(e))}function y(e){return l=i,p&&o?m(e):(o=r=i,s)}function b(){var e=Xa(),n=g(e);if(o=arguments,r=this,c=e,n){if(l===i)return function(e){return h=e,l=ra(v,t),f?m(e):s}(c);if(d)return Jr(l),l=ra(v,t),m(c)}return l===i&&(l=ra(v,t)),s}return t=Fs(t)||0,js(n)&&(f=!!n.leading,a=(d="maxWait"in n)?Un(Fs(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==i&&Jr(l),h=0,o=c=r=l=i},b.flush=function(){return l===i?s:y(Xa())},b}var is=Ir(function(e,t){return Ro(e,1,t)}),as=Ir(function(e,t,n){return Ro(e,Fs(t)||0,n)});function ss(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new rt(u);var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=e.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(ss.Cache||wo),n}function us(e){if("function"!=typeof e)throw new rt(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ss.Cache=wo;var ls=Kr(function(e,t){var n=(t=1==t.length&&vs(t[0])?Xt(t[0],vn(Li())):Xt(Uo(t,1),vn(Li()))).length;return Ir(function(o){for(var r=-1,i=Hn(o.length,n);++r<i;)o[r]=t[r].call(this,o[r]);return Ut(e,this,o)})}),cs=Ir(function(e,t){var n=Tn(t,Pi(cs));return Mi(e,k,i,t,n)}),hs=Ir(function(e,t){var n=Tn(t,Pi(hs));return Mi(e,x,i,t,n)}),fs=Oi(function(e,t){return Mi(e,M,i,i,i,t)});function ds(e,t){return e===t||e!=e&&t!=t}var ps=_i(er),ms=_i(function(e,t){return e>=t}),gs=ir(function(){return arguments}())?ir:function(e){return Ts(e)&&ct.call(e,"callee")&&!zt.call(e,"callee")},vs=o.isArray,ys=Yt?vn(Yt):function(e){return Ts(e)&&Xo(e)==ue};function bs(e){return null!=e&&$s(e.length)&&!Is(e)}function _s(e){return Ts(e)&&bs(e)}var ws=Dn||Fu,ks=Gt?vn(Gt):function(e){return Ts(e)&&Xo(e)==U};function xs(e){if(!Ts(e))return!1;var t=Xo(e);return t==q||t==H||"string"==typeof e.message&&"string"==typeof e.name&&!Cs(e)}function Is(e){if(!js(e))return!1;var t=Xo(e);return t==K||t==Z||t==F||t==ee}function Ms(e){return"number"==typeof e&&e==Ds(e)}function $s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=z}function js(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ts(e){return null!=e&&"object"==typeof e}var Es=Dt?vn(Dt):function(e){return Ts(e)&&Wi(e)==J};function Os(e){return"number"==typeof e||Ts(e)&&Xo(e)==V}function Cs(e){if(!Ts(e)||Xo(e)!=X)return!1;var t=Ct(e);if(null===t)return!0;var n=ct.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lt.call(n)==pt}var Ss=Wt?vn(Wt):function(e){return Ts(e)&&Xo(e)==te};var As=Ft?vn(Ft):function(e){return Ts(e)&&Wi(e)==ne};function zs(e){return"string"==typeof e||!vs(e)&&Ts(e)&&Xo(e)==oe}function Ps(e){return"symbol"==typeof e||Ts(e)&&Xo(e)==re}var Ls=Nt?vn(Nt):function(e){return Ts(e)&&$s(e.length)&&!!$t[Xo(e)]};var Bs=_i(fr),Rs=_i(function(e,t){return e<=t});function Ys(e){if(!e)return[];if(bs(e))return zs(e)?Sn(e):oi(e);if(Rt&&e[Rt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Rt]());var t=Wi(e);return(t==J?$n:t==ne?En:du)(e)}function Gs(e){return e?(e=Fs(e))===A||e===-A?(e<0?-1:1)*P:e==e?e:0:0===e?e:0}function Ds(e){var t=Gs(e),n=t%1;return t==t?n?t-n:t:0}function Ws(e){return e?Po(Ds(e),0,B):0}function Fs(e){if("number"==typeof e)return e;if(Ps(e))return L;if(js(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=js(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ze,"");var n=Ue.test(e);return n||qe.test(e)?Ot(e.slice(2),n?2:8):Ne.test(e)?L:+e}function Ns(e){return ri(e,iu(e))}function Us(e){return null==e?"":Br(e)}var Hs=ai(function(e,t){if(Vi(t)||bs(t))ri(t,ru(t),e);else for(var n in t)ct.call(t,n)&&Eo(e,n,t[n])}),qs=ai(function(e,t){ri(t,iu(t),e)}),Ks=ai(function(e,t,n,o){ri(t,iu(t),e,o)}),Zs=ai(function(e,t,n,o){ri(t,ru(t),e,o)}),Js=Oi(zo);var Vs=Ir(function(e,t){e=tt(e);var n=-1,o=t.length,r=o>2?t[2]:i;for(r&&qi(t[0],t[1],r)&&(o=1);++n<o;)for(var a=t[n],s=iu(a),u=-1,l=s.length;++u<l;){var c=s[u],h=e[c];(h===i||ds(h,st[c])&&!ct.call(e,c))&&(e[c]=a[c])}return e}),Qs=Ir(function(e){return e.push(i,ji),Ut(su,i,e)});function Xs(e,t,n){var o=null==e?i:Vo(e,t);return o===i?n:o}function eu(e,t){return null!=e&&Fi(e,t,nr)}var tu=mi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=n},ju(Ou)),nu=mi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),ct.call(e,t)?e[t].push(n):e[t]=[n]},Li),ou=Ir(rr);function ru(e){return bs(e)?Io(e):cr(e)}function iu(e){return bs(e)?Io(e,!0):hr(e)}var au=ai(function(e,t,n){gr(e,t,n)}),su=ai(function(e,t,n,o){gr(e,t,n,o)}),uu=Oi(function(e,t){var n={};if(null==e)return n;var o=!1;t=Xt(t,function(t){return t=qr(t,e),o||(o=t.length>1),t}),ri(e,Si(e),n),o&&(n=Lo(n,f|d|p,Ti));for(var r=t.length;r--;)Yr(n,t[r]);return n});var lu=Oi(function(e,t){return null==e?{}:function(e,t){return br(e,t,function(t,n){return eu(e,n)})}(e,t)});function cu(e,t){if(null==e)return{};var n=Xt(Si(e),function(e){return[e]});return t=Li(t),br(e,n,function(e,n){return t(e,n[0])})}var hu=Ii(ru),fu=Ii(iu);function du(e){return null==e?[]:yn(e,ru(e))}var pu=ci(function(e,t,n){return t=t.toLowerCase(),e+(n?mu(t):t)});function mu(e){return xu(Us(e).toLowerCase())}function gu(e){return(e=Us(e))&&e.replace(Ze,kn).replace(bt,"")}var vu=ci(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),yu=ci(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),bu=li("toLowerCase");var _u=ci(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var wu=ci(function(e,t,n){return e+(n?" ":"")+xu(t)});var ku=ci(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),xu=li("toUpperCase");function Iu(e,t,n){return e=Us(e),(t=n?i:t)===i?function(e){return xt.test(e)}(e)?function(e){return e.match(wt)||[]}(e):function(e){return e.match(Ge)||[]}(e):e.match(t)||[]}var Mu=Ir(function(e,t){try{return Ut(e,i,t)}catch(e){return xs(e)?e:new Qe(e)}}),$u=Oi(function(e,t){return qt(t,function(t){t=ca(t),Ao(e,t,ns(e[t],e))}),e});function ju(e){return function(){return e}}var Tu=di(),Eu=di(!0);function Ou(e){return e}function Cu(e){return lr("function"==typeof e?e:Lo(e,f))}var Su=Ir(function(e,t){return function(n){return rr(n,e,t)}}),Au=Ir(function(e,t){return function(n){return rr(e,n,t)}});function zu(e,t,n){var o=ru(t),r=Jo(t,o);null!=n||js(t)&&(r.length||!o.length)||(n=t,t=e,e=this,r=Jo(t,ru(t)));var i=!(js(n)&&"chain"in n&&!n.chain),a=Is(e);return qt(r,function(n){var o=t[n];e[n]=o,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=oi(this.__actions__)).push({func:o,args:arguments,thisArg:e}),n.__chain__=t,n}return o.apply(e,en([this.value()],arguments))})}),e}function Pu(){}var Lu=vi(Xt),Bu=vi(Zt),Ru=vi(on);function Yu(e){return Ki(e)?fn(ca(e)):function(e){return function(t){return Vo(t,e)}}(e)}var Gu=bi(),Du=bi(!0);function Wu(){return[]}function Fu(){return!1}var Nu=gi(function(e,t){return e+t},0),Uu=ki("ceil"),Hu=gi(function(e,t){return e/t},1),qu=ki("floor");var Ku,Zu=gi(function(e,t){return e*t},1),Ju=ki("round"),Vu=gi(function(e,t){return e-t},0);return po.after=function(e,t){if("function"!=typeof t)throw new rt(u);return e=Ds(e),function(){if(--e<1)return t.apply(this,arguments)}},po.ary=es,po.assign=Hs,po.assignIn=qs,po.assignInWith=Ks,po.assignWith=Zs,po.at=Js,po.before=ts,po.bind=ns,po.bindAll=$u,po.bindKey=os,po.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return vs(e)?e:[e]},po.chain=Ya,po.chunk=function(e,t,n){t=(n?qi(e,t,n):t===i)?1:Un(Ds(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var a=0,s=0,u=o(Rn(r/t));a<r;)u[s++]=Cr(e,a,a+=t);return u},po.compact=function(e){for(var t=-1,n=null==e?0:e.length,o=0,r=[];++t<n;){var i=e[t];i&&(r[o++]=i)}return r},po.concat=function(){var e=arguments.length;if(!e)return[];for(var t=o(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return en(vs(n)?oi(n):[n],Uo(t,1))},po.cond=function(e){var t=null==e?0:e.length,n=Li();return e=t?Xt(e,function(e){if("function"!=typeof e[1])throw new rt(u);return[n(e[0]),e[1]]}):[],Ir(function(n){for(var o=-1;++o<t;){var r=e[o];if(Ut(r[0],this,n))return Ut(r[1],this,n)}})},po.conforms=function(e){return function(e){var t=ru(e);return function(n){return Bo(n,e,t)}}(Lo(e,f))},po.constant=ju,po.countBy=Wa,po.create=function(e,t){var n=mo(e);return null==t?n:So(n,t)},po.curry=function e(t,n,o){var r=Mi(t,_,i,i,i,i,i,n=o?i:n);return r.placeholder=e.placeholder,r},po.curryRight=function e(t,n,o){var r=Mi(t,w,i,i,i,i,i,n=o?i:n);return r.placeholder=e.placeholder,r},po.debounce=rs,po.defaults=Vs,po.defaultsDeep=Qs,po.defer=is,po.delay=as,po.difference=da,po.differenceBy=pa,po.differenceWith=ma,po.drop=function(e,t,n){var o=null==e?0:e.length;return o?Cr(e,(t=n||t===i?1:Ds(t))<0?0:t,o):[]},po.dropRight=function(e,t,n){var o=null==e?0:e.length;return o?Cr(e,0,(t=o-(t=n||t===i?1:Ds(t)))<0?0:t):[]},po.dropRightWhile=function(e,t){return e&&e.length?Dr(e,Li(t,3),!0,!0):[]},po.dropWhile=function(e,t){return e&&e.length?Dr(e,Li(t,3),!0):[]},po.fill=function(e,t,n,o){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&qi(e,t,n)&&(n=0,o=r),function(e,t,n,o){var r=e.length;for((n=Ds(n))<0&&(n=-n>r?0:r+n),(o=o===i||o>r?r:Ds(o))<0&&(o+=r),o=n>o?0:Ws(o);n<o;)e[n++]=t;return e}(e,t,n,o)):[]},po.filter=function(e,t){return(vs(e)?Jt:No)(e,Li(t,3))},po.flatMap=function(e,t){return Uo(Ja(e,t),1)},po.flatMapDeep=function(e,t){return Uo(Ja(e,t),A)},po.flatMapDepth=function(e,t,n){return n=n===i?1:Ds(n),Uo(Ja(e,t),n)},po.flatten=ya,po.flattenDeep=function(e){return null!=e&&e.length?Uo(e,A):[]},po.flattenDepth=function(e,t){return null!=e&&e.length?Uo(e,t=t===i?1:Ds(t)):[]},po.flip=function(e){return Mi(e,$)},po.flow=Tu,po.flowRight=Eu,po.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,o={};++t<n;){var r=e[t];o[r[0]]=r[1]}return o},po.functions=function(e){return null==e?[]:Jo(e,ru(e))},po.functionsIn=function(e){return null==e?[]:Jo(e,iu(e))},po.groupBy=qa,po.initial=function(e){return null!=e&&e.length?Cr(e,0,-1):[]},po.intersection=_a,po.intersectionBy=wa,po.intersectionWith=ka,po.invert=tu,po.invertBy=nu,po.invokeMap=Ka,po.iteratee=Cu,po.keyBy=Za,po.keys=ru,po.keysIn=iu,po.map=Ja,po.mapKeys=function(e,t){var n={};return t=Li(t,3),Ko(e,function(e,o,r){Ao(n,t(e,o,r),e)}),n},po.mapValues=function(e,t){var n={};return t=Li(t,3),Ko(e,function(e,o,r){Ao(n,o,t(e,o,r))}),n},po.matches=function(e){return pr(Lo(e,f))},po.matchesProperty=function(e,t){return mr(e,Lo(t,f))},po.memoize=ss,po.merge=au,po.mergeWith=su,po.method=Su,po.methodOf=Au,po.mixin=zu,po.negate=us,po.nthArg=function(e){return e=Ds(e),Ir(function(t){return vr(t,e)})},po.omit=uu,po.omitBy=function(e,t){return cu(e,us(Li(t)))},po.once=function(e){return ts(2,e)},po.orderBy=function(e,t,n,o){return null==e?[]:(vs(t)||(t=null==t?[]:[t]),vs(n=o?i:n)||(n=null==n?[]:[n]),yr(e,t,n))},po.over=Lu,po.overArgs=ls,po.overEvery=Bu,po.overSome=Ru,po.partial=cs,po.partialRight=hs,po.partition=Va,po.pick=lu,po.pickBy=cu,po.property=Yu,po.propertyOf=function(e){return function(t){return null==e?i:Vo(e,t)}},po.pull=Ia,po.pullAll=Ma,po.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?_r(e,t,Li(n,2)):e},po.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?_r(e,t,i,n):e},po.pullAt=$a,po.range=Gu,po.rangeRight=Du,po.rearg=fs,po.reject=function(e,t){return(vs(e)?Jt:No)(e,us(Li(t,3)))},po.remove=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,r=[],i=e.length;for(t=Li(t,3);++o<i;){var a=e[o];t(a,o,e)&&(n.push(a),r.push(o))}return wr(e,r),n},po.rest=function(e,t){if("function"!=typeof e)throw new rt(u);return Ir(e,t=t===i?t:Ds(t))},po.reverse=ja,po.sampleSize=function(e,t,n){return t=(n?qi(e,t,n):t===i)?1:Ds(t),(vs(e)?$o:$r)(e,t)},po.set=function(e,t,n){return null==e?e:jr(e,t,n)},po.setWith=function(e,t,n,o){return o="function"==typeof o?o:i,null==e?e:jr(e,t,n,o)},po.shuffle=function(e){return(vs(e)?jo:Or)(e)},po.slice=function(e,t,n){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&qi(e,t,n)?(t=0,n=o):(t=null==t?0:Ds(t),n=n===i?o:Ds(n)),Cr(e,t,n)):[]},po.sortBy=Qa,po.sortedUniq=function(e){return e&&e.length?Pr(e):[]},po.sortedUniqBy=function(e,t){return e&&e.length?Pr(e,Li(t,2)):[]},po.split=function(e,t,n){return n&&"number"!=typeof n&&qi(e,t,n)&&(t=n=i),(n=n===i?B:n>>>0)?(e=Us(e))&&("string"==typeof t||null!=t&&!Ss(t))&&!(t=Br(t))&&Mn(e)?Zr(Sn(e),0,n):e.split(t,n):[]},po.spread=function(e,t){if("function"!=typeof e)throw new rt(u);return t=null==t?0:Un(Ds(t),0),Ir(function(n){var o=n[t],r=Zr(n,0,t);return o&&en(r,o),Ut(e,this,r)})},po.tail=function(e){var t=null==e?0:e.length;return t?Cr(e,1,t):[]},po.take=function(e,t,n){return e&&e.length?Cr(e,0,(t=n||t===i?1:Ds(t))<0?0:t):[]},po.takeRight=function(e,t,n){var o=null==e?0:e.length;return o?Cr(e,(t=o-(t=n||t===i?1:Ds(t)))<0?0:t,o):[]},po.takeRightWhile=function(e,t){return e&&e.length?Dr(e,Li(t,3),!1,!0):[]},po.takeWhile=function(e,t){return e&&e.length?Dr(e,Li(t,3)):[]},po.tap=function(e,t){return t(e),e},po.throttle=function(e,t,n){var o=!0,r=!0;if("function"!=typeof e)throw new rt(u);return js(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),rs(e,t,{leading:o,maxWait:t,trailing:r})},po.thru=Ga,po.toArray=Ys,po.toPairs=hu,po.toPairsIn=fu,po.toPath=function(e){return vs(e)?Xt(e,ca):Ps(e)?[e]:oi(la(Us(e)))},po.toPlainObject=Ns,po.transform=function(e,t,n){var o=vs(e),r=o||ws(e)||Ls(e);if(t=Li(t,4),null==n){var i=e&&e.constructor;n=r?o?new i:[]:js(e)&&Is(i)?mo(Ct(e)):{}}return(r?qt:Ko)(e,function(e,o,r){return t(n,e,o,r)}),n},po.unary=function(e){return es(e,1)},po.union=Ta,po.unionBy=Ea,po.unionWith=Oa,po.uniq=function(e){return e&&e.length?Rr(e):[]},po.uniqBy=function(e,t){return e&&e.length?Rr(e,Li(t,2)):[]},po.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Rr(e,i,t):[]},po.unset=function(e,t){return null==e||Yr(e,t)},po.unzip=Ca,po.unzipWith=Sa,po.update=function(e,t,n){return null==e?e:Gr(e,t,Hr(n))},po.updateWith=function(e,t,n,o){return o="function"==typeof o?o:i,null==e?e:Gr(e,t,Hr(n),o)},po.values=du,po.valuesIn=function(e){return null==e?[]:yn(e,iu(e))},po.without=Aa,po.words=Iu,po.wrap=function(e,t){return cs(Hr(t),e)},po.xor=za,po.xorBy=Pa,po.xorWith=La,po.zip=Ba,po.zipObject=function(e,t){return Nr(e||[],t||[],Eo)},po.zipObjectDeep=function(e,t){return Nr(e||[],t||[],jr)},po.zipWith=Ra,po.entries=hu,po.entriesIn=fu,po.extend=qs,po.extendWith=Ks,zu(po,po),po.add=Nu,po.attempt=Mu,po.camelCase=pu,po.capitalize=mu,po.ceil=Uu,po.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=Fs(n))==n?n:0),t!==i&&(t=(t=Fs(t))==t?t:0),Po(Fs(e),t,n)},po.clone=function(e){return Lo(e,p)},po.cloneDeep=function(e){return Lo(e,f|p)},po.cloneDeepWith=function(e,t){return Lo(e,f|p,t="function"==typeof t?t:i)},po.cloneWith=function(e,t){return Lo(e,p,t="function"==typeof t?t:i)},po.conformsTo=function(e,t){return null==t||Bo(e,t,ru(t))},po.deburr=gu,po.defaultTo=function(e,t){return null==e||e!=e?t:e},po.divide=Hu,po.endsWith=function(e,t,n){e=Us(e),t=Br(t);var o=e.length,r=n=n===i?o:Po(Ds(n),0,o);return(n-=t.length)>=0&&e.slice(n,r)==t},po.eq=ds,po.escape=function(e){return(e=Us(e))&&Me.test(e)?e.replace(xe,xn):e},po.escapeRegExp=function(e){return(e=Us(e))&&Ae.test(e)?e.replace(Se,"\\$&"):e},po.every=function(e,t,n){var o=vs(e)?Zt:Wo;return n&&qi(e,t,n)&&(t=i),o(e,Li(t,3))},po.find=Fa,po.findIndex=ga,po.findKey=function(e,t){return an(e,Li(t,3),Ko)},po.findLast=Na,po.findLastIndex=va,po.findLastKey=function(e,t){return an(e,Li(t,3),Zo)},po.floor=qu,po.forEach=Ua,po.forEachRight=Ha,po.forIn=function(e,t){return null==e?e:Ho(e,Li(t,3),iu)},po.forInRight=function(e,t){return null==e?e:qo(e,Li(t,3),iu)},po.forOwn=function(e,t){return e&&Ko(e,Li(t,3))},po.forOwnRight=function(e,t){return e&&Zo(e,Li(t,3))},po.get=Xs,po.gt=ps,po.gte=ms,po.has=function(e,t){return null!=e&&Fi(e,t,tr)},po.hasIn=eu,po.head=ba,po.identity=Ou,po.includes=function(e,t,n,o){e=bs(e)?e:du(e),n=n&&!o?Ds(n):0;var r=e.length;return n<0&&(n=Un(r+n,0)),zs(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&un(e,t,n)>-1},po.indexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=null==n?0:Ds(n);return r<0&&(r=Un(o+r,0)),un(e,t,r)},po.inRange=function(e,t,n){return t=Gs(t),n===i?(n=t,t=0):n=Gs(n),function(e,t,n){return e>=Hn(t,n)&&e<Un(t,n)}(e=Fs(e),t,n)},po.invoke=ou,po.isArguments=gs,po.isArray=vs,po.isArrayBuffer=ys,po.isArrayLike=bs,po.isArrayLikeObject=_s,po.isBoolean=function(e){return!0===e||!1===e||Ts(e)&&Xo(e)==N},po.isBuffer=ws,po.isDate=ks,po.isElement=function(e){return Ts(e)&&1===e.nodeType&&!Cs(e)},po.isEmpty=function(e){if(null==e)return!0;if(bs(e)&&(vs(e)||"string"==typeof e||"function"==typeof e.splice||ws(e)||Ls(e)||gs(e)))return!e.length;var t=Wi(e);if(t==J||t==ne)return!e.size;if(Vi(e))return!cr(e).length;for(var n in e)if(ct.call(e,n))return!1;return!0},po.isEqual=function(e,t){return ar(e,t)},po.isEqualWith=function(e,t,n){var o=(n="function"==typeof n?n:i)?n(e,t):i;return o===i?ar(e,t,i,n):!!o},po.isError=xs,po.isFinite=function(e){return"number"==typeof e&&Wn(e)},po.isFunction=Is,po.isInteger=Ms,po.isLength=$s,po.isMap=Es,po.isMatch=function(e,t){return e===t||sr(e,t,Ri(t))},po.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,sr(e,t,Ri(t),n)},po.isNaN=function(e){return Os(e)&&e!=+e},po.isNative=function(e){if(Ji(e))throw new Qe(s);return ur(e)},po.isNil=function(e){return null==e},po.isNull=function(e){return null===e},po.isNumber=Os,po.isObject=js,po.isObjectLike=Ts,po.isPlainObject=Cs,po.isRegExp=Ss,po.isSafeInteger=function(e){return Ms(e)&&e>=-z&&e<=z},po.isSet=As,po.isString=zs,po.isSymbol=Ps,po.isTypedArray=Ls,po.isUndefined=function(e){return e===i},po.isWeakMap=function(e){return Ts(e)&&Wi(e)==ae},po.isWeakSet=function(e){return Ts(e)&&Xo(e)==se},po.join=function(e,t){return null==e?"":Fn.call(e,t)},po.kebabCase=vu,po.last=xa,po.lastIndexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var r=o;return n!==i&&(r=(r=Ds(n))<0?Un(o+r,0):Hn(r,o-1)),t==t?function(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}(e,t,r):sn(e,cn,r,!0)},po.lowerCase=yu,po.lowerFirst=bu,po.lt=Bs,po.lte=Rs,po.max=function(e){return e&&e.length?Fo(e,Ou,er):i},po.maxBy=function(e,t){return e&&e.length?Fo(e,Li(t,2),er):i},po.mean=function(e){return hn(e,Ou)},po.meanBy=function(e,t){return hn(e,Li(t,2))},po.min=function(e){return e&&e.length?Fo(e,Ou,fr):i},po.minBy=function(e,t){return e&&e.length?Fo(e,Li(t,2),fr):i},po.stubArray=Wu,po.stubFalse=Fu,po.stubObject=function(){return{}},po.stubString=function(){return""},po.stubTrue=function(){return!0},po.multiply=Zu,po.nth=function(e,t){return e&&e.length?vr(e,Ds(t)):i},po.noConflict=function(){return At._===this&&(At._=mt),this},po.noop=Pu,po.now=Xa,po.pad=function(e,t,n){e=Us(e);var o=(t=Ds(t))?Cn(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return yi(Yn(r),n)+e+yi(Rn(r),n)},po.padEnd=function(e,t,n){e=Us(e);var o=(t=Ds(t))?Cn(e):0;return t&&o<t?e+yi(t-o,n):e},po.padStart=function(e,t,n){e=Us(e);var o=(t=Ds(t))?Cn(e):0;return t&&o<t?yi(t-o,n)+e:e},po.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Kn(Us(e).replace(Pe,""),t||0)},po.random=function(e,t,n){if(n&&"boolean"!=typeof n&&qi(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Gs(e),t===i?(t=e,e=0):t=Gs(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=Zn();return Hn(e+r*(t-e+Et("1e-"+((r+"").length-1))),t)}return kr(e,t)},po.reduce=function(e,t,n){var o=vs(e)?tn:pn,r=arguments.length<3;return o(e,Li(t,4),n,r,Go)},po.reduceRight=function(e,t,n){var o=vs(e)?nn:pn,r=arguments.length<3;return o(e,Li(t,4),n,r,Do)},po.repeat=function(e,t,n){return t=(n?qi(e,t,n):t===i)?1:Ds(t),xr(Us(e),t)},po.replace=function(){var e=arguments,t=Us(e[0]);return e.length<3?t:t.replace(e[1],e[2])},po.result=function(e,t,n){var o=-1,r=(t=qr(t,e)).length;for(r||(r=1,e=i);++o<r;){var a=null==e?i:e[ca(t[o])];a===i&&(o=r,a=n),e=Is(a)?a.call(e):a}return e},po.round=Ju,po.runInContext=e,po.sample=function(e){return(vs(e)?Mo:Mr)(e)},po.size=function(e){if(null==e)return 0;if(bs(e))return zs(e)?Cn(e):e.length;var t=Wi(e);return t==J||t==ne?e.size:cr(e).length},po.snakeCase=_u,po.some=function(e,t,n){var o=vs(e)?on:Sr;return n&&qi(e,t,n)&&(t=i),o(e,Li(t,3))},po.sortedIndex=function(e,t){return Ar(e,t)},po.sortedIndexBy=function(e,t,n){return zr(e,t,Li(n,2))},po.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var o=Ar(e,t);if(o<n&&ds(e[o],t))return o}return-1},po.sortedLastIndex=function(e,t){return Ar(e,t,!0)},po.sortedLastIndexBy=function(e,t,n){return zr(e,t,Li(n,2),!0)},po.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Ar(e,t,!0)-1;if(ds(e[n],t))return n}return-1},po.startCase=wu,po.startsWith=function(e,t,n){return e=Us(e),n=null==n?0:Po(Ds(n),0,e.length),t=Br(t),e.slice(n,n+t.length)==t},po.subtract=Vu,po.sum=function(e){return e&&e.length?mn(e,Ou):0},po.sumBy=function(e,t){return e&&e.length?mn(e,Li(t,2)):0},po.template=function(e,t,n){var o=po.templateSettings;n&&qi(e,t,n)&&(t=i),e=Us(e),t=Ks({},t,o,$i);var r,a,s=Ks({},t.imports,o.imports,$i),u=ru(s),l=yn(s,u),c=0,h=t.interpolate||Je,f="__p += '",d=nt((t.escape||Je).source+"|"+h.source+"|"+(h===Te?We:Je).source+"|"+(t.evaluate||Je).source+"|$","g"),p="//# sourceURL="+(ct.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mt+"]")+"\n";e.replace(d,function(t,n,o,i,s,u){return o||(o=i),f+=e.slice(c,u).replace(Ve,In),n&&(r=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),o&&(f+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),f+="';\n";var m=ct.call(t,"variable")&&t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(be,""):f).replace(_e,"$1").replace(we,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Mu(function(){return Xe(u,p+"return "+f).apply(i,l)});if(g.source=f,xs(g))throw g;return g},po.times=function(e,t){if((e=Ds(e))<1||e>z)return[];var n=B,o=Hn(e,B);t=Li(t),e-=B;for(var r=gn(o,t);++n<e;)t(n);return r},po.toFinite=Gs,po.toInteger=Ds,po.toLength=Ws,po.toLower=function(e){return Us(e).toLowerCase()},po.toNumber=Fs,po.toSafeInteger=function(e){return e?Po(Ds(e),-z,z):0===e?e:0},po.toString=Us,po.toUpper=function(e){return Us(e).toUpperCase()},po.trim=function(e,t,n){if((e=Us(e))&&(n||t===i))return e.replace(ze,"");if(!e||!(t=Br(t)))return e;var o=Sn(e),r=Sn(t);return Zr(o,_n(o,r),wn(o,r)+1).join("")},po.trimEnd=function(e,t,n){if((e=Us(e))&&(n||t===i))return e.replace(Le,"");if(!e||!(t=Br(t)))return e;var o=Sn(e);return Zr(o,0,wn(o,Sn(t))+1).join("")},po.trimStart=function(e,t,n){if((e=Us(e))&&(n||t===i))return e.replace(Pe,"");if(!e||!(t=Br(t)))return e;var o=Sn(e);return Zr(o,_n(o,Sn(t))).join("")},po.truncate=function(e,t){var n=j,o=T;if(js(t)){var r="separator"in t?t.separator:r;n="length"in t?Ds(t.length):n,o="omission"in t?Br(t.omission):o}var a=(e=Us(e)).length;if(Mn(e)){var s=Sn(e);a=s.length}if(n>=a)return e;var u=n-Cn(o);if(u<1)return o;var l=s?Zr(s,0,u).join(""):e.slice(0,u);if(r===i)return l+o;if(s&&(u+=l.length-u),Ss(r)){if(e.slice(u).search(r)){var c,h=l;for(r.global||(r=nt(r.source,Us(Fe.exec(r))+"g")),r.lastIndex=0;c=r.exec(h);)var f=c.index;l=l.slice(0,f===i?u:f)}}else if(e.indexOf(Br(r),u)!=u){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+o},po.unescape=function(e){return(e=Us(e))&&Ie.test(e)?e.replace(ke,An):e},po.uniqueId=function(e){var t=++ht;return Us(e)+t},po.upperCase=ku,po.upperFirst=xu,po.each=Ua,po.eachRight=Ha,po.first=ba,zu(po,(Ku={},Ko(po,function(e,t){ct.call(po.prototype,t)||(Ku[t]=e)}),Ku),{chain:!1}),po.VERSION="4.17.20",qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){po[e].placeholder=po}),qt(["drop","take"],function(e,t){yo.prototype[e]=function(n){n=n===i?1:Un(Ds(n),0);var o=this.__filtered__&&!t?new yo(this):this.clone();return o.__filtered__?o.__takeCount__=Hn(n,o.__takeCount__):o.__views__.push({size:Hn(n,B),type:e+(o.__dir__<0?"Right":"")}),o},yo.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),qt(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==C||3==n;yo.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Li(e,3),type:n}),t.__filtered__=t.__filtered__||o,t}}),qt(["head","last"],function(e,t){var n="take"+(t?"Right":"");yo.prototype[e]=function(){return this[n](1).value()[0]}}),qt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");yo.prototype[e]=function(){return this.__filtered__?new yo(this):this[n](1)}}),yo.prototype.compact=function(){return this.filter(Ou)},yo.prototype.find=function(e){return this.filter(e).head()},yo.prototype.findLast=function(e){return this.reverse().find(e)},yo.prototype.invokeMap=Ir(function(e,t){return"function"==typeof e?new yo(this):this.map(function(n){return rr(n,e,t)})}),yo.prototype.reject=function(e){return this.filter(us(Li(e)))},yo.prototype.slice=function(e,t){e=Ds(e);var n=this;return n.__filtered__&&(e>0||t<0)?new yo(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=Ds(t))<0?n.dropRight(-t):n.take(t-e)),n)},yo.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},yo.prototype.toArray=function(){return this.take(B)},Ko(yo.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=po[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);r&&(po.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,u=t instanceof yo,l=s[0],c=u||vs(t),h=function(e){var t=r.apply(po,en([e],s));return o&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=a&&!f,m=u&&!d;if(!a&&c){t=m?t:new yo(this);var g=e.apply(t,s);return g.__actions__.push({func:Ga,args:[h],thisArg:i}),new vo(g,f)}return p&&m?e.apply(this,s):(g=this.thru(h),p?o?g.value()[0]:g.value():g)})}),qt(["pop","push","shift","sort","splice","unshift"],function(e){var t=it[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);po.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var r=this.value();return t.apply(vs(r)?r:[],e)}return this[n](function(n){return t.apply(vs(n)?n:[],e)})}}),Ko(yo.prototype,function(e,t){var n=po[t];if(n){var o=n.name+"";ct.call(ro,o)||(ro[o]=[]),ro[o].push({name:t,func:n})}}),ro[pi(i,y).name]=[{name:"wrapper",func:i}],yo.prototype.clone=function(){var e=new yo(this.__wrapped__);return e.__actions__=oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=oi(this.__views__),e},yo.prototype.reverse=function(){if(this.__filtered__){var e=new yo(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},yo.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=vs(e),o=t<0,r=n?e.length:0,i=function(e,t,n){for(var o=-1,r=n.length;++o<r;){var i=n[o],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Hn(t,e+a);break;case"takeRight":e=Un(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=i.start,s=i.end,u=s-a,l=o?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=Hn(u,this.__takeCount__);if(!n||!o&&r==u&&d==u)return Wr(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var m=-1,g=e[l+=t];++m<h;){var v=c[m],y=v.iteratee,b=v.type,_=y(g);if(b==S)g=_;else if(!_){if(b==C)continue e;break e}}p[f++]=g}return p},po.prototype.at=Da,po.prototype.chain=function(){return Ya(this)},po.prototype.commit=function(){return new vo(this.value(),this.__chain__)},po.prototype.next=function(){this.__values__===i&&(this.__values__=Ys(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},po.prototype.plant=function(e){for(var t,n=this;n instanceof go;){var o=fa(n);o.__index__=0,o.__values__=i,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t},po.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof yo){var t=e;return this.__actions__.length&&(t=new yo(this)),(t=t.reverse()).__actions__.push({func:Ga,args:[ja],thisArg:i}),new vo(t,this.__chain__)}return this.thru(ja)},po.prototype.toJSON=po.prototype.valueOf=po.prototype.value=function(){return Wr(this.__wrapped__,this.__actions__)},po.prototype.first=po.prototype.head,Rt&&(po.prototype[Rt]=function(){return this}),po}();At._=zn,(r=function(){return zn}.call(t,n,t,o))===i||(o.exports=r)}).call(this)}).call(this,n(1),n(2)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);var o=Object.keys(localStorage).some(e=>-1!==e.indexOf("ConsoleGame.prefs"));console.log(o?"user preferences applied.":"no user preferences detected.");var r=localStorage.getItem("ConsoleGame.prefs.font")||"monaco",i=localStorage.getItem("ConsoleGame.prefs.color")||"#32cd32",a=localStorage.getItem("ConsoleGame.prefs.size")||"100%",s=`font-size:calc(1.2 *${a});color:${i};font-family:${r};line-height:1.5;`;var u=function(){const e=["****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","****************"];return(e=>{let t,n=[];return e.map(e=>{t=e.map(e=>e.split("")),n.push(t)}),n})([e,["****************","****************","****************","****************","****************","****************","****************","****************","****************","*******CI*******","******)B********","****************","****************","****************","****************","****************"],["****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","******(*********","****************","****************","****************","****************","****************"],["****************","****************","****************","****************","****************","****************","****************","****************","****************","********ZZa*****","******@=XZ******","*******=********","******+%J*******","*******%********","*******A********","****************"],["****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","*******#********","****************","****************","****************","****************","****************"],["****************","****************","****************","****************","****************","****************","****************","****************","****************","****************","*******^********","******0-FG******","*******-*H******","******E-D*******","*******$********","****************"],e])}();var l=function(e){const t={name:"Nowhere",locked:!1,lockText:"",unlockText:"",hiddenSecrets:!1,get hideSecrets(){const t=this.visibleEnv.includes(e.items._lantern)||this.hiddenEnv.includes(e.items._lantern)||e.inInventory("lantern"),n=this.visibleEnv.includes(e.items._matchbook)||e.inInventory("matchbook"),o=e.items._lantern.fireCount>0,r=e.items._matchbook.fireCount>0;return!(t&&o||n&&r)&&this.hiddenSecrets},set hideSecrets(e){this.hiddenSecrets=e},description:"You find yourself in a non-descript, unremarkable, non-place. Nothing is happening, nor is anything of interest likely to happen here in the future.",smell:"Your nose is unable to detect anything unusual, beyond the smell of age and decay that permeates the entirety of the decrepit building.",sound:"The silence is broken only by the faint sound of the wind outside, and the occasional creak of sagging floorboards underfoot.",hiddenEnv:[],visibleEnv:[],get env(){return{visibleEnv:this.visibleEnv,containedEnv:this.containedEnv,hiddenEnv:this.hideSecrets?[]:this.hiddenEnv}},get openContainers(){return(this.hideSecrets?this.visibleEnv:this.visibleEnv.concat(this.hiddenEnv)).filter(e=>e.contents&&e.contents.length>0).filter(e=>!1===e.closed)},get containedEnv(){return(this.openContainers.length>0?this.openContainers.map(e=>e.contents):[]).flat()},removeFromEnv:function(t){if("containedEnv"===e.fromWhichEnv(t.name))return this.removeFromContainer(t);const n=this[e.fromWhichEnv(t.name)],o=n.map(e=>e.name).indexOf(t.name),r=n.splice(o,1);return this[e.fromWhichEnv(t.name)]=r},removeFromContainer:function(t){const[n]=this.openContainers.filter(e=>e.contents.includes(t)),o=n.contents.filter(e=>e!==t),r=e.fromWhichEnv(n.name),i=this[r].map(e=>e.name).indexOf(n.name);return this[r][i].contents=o},addToEnv:function(t){const n=e.items[`_${t}`];return this.visibleEnv.push(n)}},n={0:{locked:!0,lockText:"An attempt has been made to board up this door. Reaching between the unevenly spaced boards, you try the doorknob and discover that it is also locked."},A:{name:"Freedom!",locked:!1,closed:!0,get lockText(){return`The formidable wooden front door will not open. It looks as old as the rest of the building, and like the wood panelled walls of the entrance hall, it is dark with countless layers of murky varnish. It is ${this.locked?"locked":"unlocked"}.`},get description(){return e.state.turn<3?(e.captured(),""):e.winner("\nYou have escaped!\n")}},a:{name:"Freedom!",locked:!0,closed:!0,get lockText(){return`The kitchen door will not open. It is ${this.locked?"locked":"unlocked"}.`},get description(){return e.state.turn<3?(e.captured(),""):e.winner("\nYou have escaped!\n")}},B:{name:"Basement",description:"A single dim bulb, dangling on a cord from the low, unfinished ceiling, is barely enough to illuminate the room. The floors appear to be composed of compressed earth, left unfinished since the space was initially excavated more than a century ago.  ",smell:"It smells strongly of old, damp basement – a mix of dirt and mildew with perhaps a hint of rodent feces.",get sound(){return`You can hear a dog barking. The sound is emanating from the room north of you. It is loud enough now for you to recognize it as ${e.state.dogName}'s bark!`}},C:{name:"Dark room",hiddenSecrets:!0,get des1(){return`As you walk into the dark room, it feels as if the increasingly uneven floor is sloping downward, though you can see nothing. \nIt is pitch black. You are likely to be eaten by a grue. \nSomewhere in the dark, you can hear ${e.state.dogName} barking excitedly!`},get des2(){return"By the flickering light of the flame, you can see that the floor becomes rougher and more irregular, sloping down toward the north."},smell:"It smells strongly of old, damp dungeon – a mix of dirt and mildew with perhaps a hint of grue feces.",get description(){return this.hideSecrets?this.des1:this.des2},hiddenEnv:["lantern","basement_door"],visibleEnv:["grue"]},D:{name:"Bathroom",description:"The bathroom is tiled with hundreds of tiny, white, hexagonal tiles. It features the usual bathroom amenities, like a sink, a tub and a commode.",visibleEnv:["sink","bathtub","toilet","knife"]},E:{name:"Guest Room",description:"The guest room is modestly furnished, with little more than a small bed and a dresser.",visibleEnv:["bed","dresser","dresser_drawer"]},F:{name:"Sitting room",description:"A small sitting room adjoins the master bedroom. It contains a cushioned armchair and a small sofa, both facing a coffee table.",visibleEnv:["chair","sofa","coffee_table","photo"]},G:{name:"Master bedroom",get description(){return"The master bedroom is spacious though sparsely furnished, containing only a bedframe, a wardrobe and a nightstand"},visibleEnv:["bed","nightstand","nightstand_drawer","wardrobe"]},H:{name:"Master bathroom",description:"The bathroom adjoining the bedroom has all of the expected fixtures, though they are corroded and covered in filth. ",visibleEnv:["toilet","sink","bathtub"]},I:{name:"Cell",description:"It is a dark and scary cell.",locked:!0,closed:!0,smell:"It smells like dog waste.",get lockText(){return`An ominous-looking, rusted steel door blocks your path. It is ${this.locked?"locked":"unlocked"}.`},visibleEnv:["dog"]},J:{name:"Parlor",get description(){return`This room looks like it was used to screen films and recordings. There is a tall white pedestal${e.inEnvironment("projector")?", supporting a squarish plastic Super 8 projector,":""} in the center of the room. `},visibleEnv:["projector","screen","pedestal","chair","phonograph"]},"^":{name:"Second floor hallway, north",description:"You are at the top of a wide wooden staircase, on the second floor of the old house.",visibleEnv:[]},"-":{name:"Second floor hallway, south",description:"It looks like there are a couple of rooms on either side of the broad hallway, and a small broom closet at the south end.",visibleEnv:[]},"+":{name:"Study",visibleDescription:"The walls of the dark, wood-panelled study are lined with bookshelves, containing countless dusty tomes. Behind an imposing walnut desk is a tall-backed desk chair.",smell:"The pleasantly musty smell of old books emanates from the bookshelves that line the wall.",hideSecrets:!0,visibleEnv:["desk","painting","chair","bookshelves","books","drawer","booklet"],hiddenEnv:["safe"],hiddenDescription:"In space where a painting formerly hung there is a small alcove housing a wall safe.",get description(){return this.hideSecrets?this.visibleDescription+"\nOn the wall behind the chair hangs an ornately framed painting.":this.visibleDescription+"\n\n"+this.hiddenDescription}},"#":{name:"Staircase landing",description:"You are on the landing of a worn oak staircase connecting the first and second floors of the old abandoned house.",visibleEnv:[]},"%":{name:"Entrance hall, south",description:"You are in the main entrance hall of a seemingly abandoned house. There are two doors on either side of the hall. The front door is to the south. At the north end of the hall is a wide oak staircase that connects the first and second floors of the old house.",visibleEnv:["door","note"]},"=":{name:"Entrance hall, north",description:"You are in the main entrance hall of a seemingly abandoned house. There are two doors on either side of the hall. The front door is to the south. At the rear of the hall is a wide oak staircase that connects the first and second floors of the old house.",visibleEnv:[]},"@":{name:"Stone staircase, top",description:"You are at the top of a stone staircase that leads down to the basement. A faint cold draft greets you from below.",smell:"A vaguely unfresh scent wafts up from the basement.",visibleEnv:["collar"],sound:"You do not hear anything."},"(":{name:"Stone staircase, landing",description:"You are standing on a stone staircase leading to the basement. A faint cold draft greets you from below.",smell:"As you descend, the smell of mildew and earth becomes noticeable.",sound:"For a moment, you are certain you can hear what sounds like muffled barking, but when you stop moving and strain to hear it again, the sound has stopped."},")":{name:"Stone staircase, bottom",description:"You are standing on a stone staircase leading upwards to the first floor.",smell:"It smells strongly of old, damp basement – a mix of dirt and mildew with perhaps a hint of rodent feces.",sound:"You can definitely hear the sound of distant, muffled barking. It is coming from the east!"},$:{name:"Broom closet",hiddenSecrets:!0,hiddenEnv:["glove"],visibleEnv:["chain"],des1:"The small closet is dark, although you can see a small chain hanging in front of you.",get des2(){const t=this.hiddenEnv,n=t.length>1?"y":"ies";return"The inside of this small broom closet is devoid of brooms, or much of anything else, for that matter"+(t.length?`, with the exception of ${e.formatList(t.map(e=>`${e.article} ${e.name}`))} which occup${n} a dusty corner.`:".")},get description(){return this.hideSecrets?this.des1:this.des2}},X:{name:"Dining room",visibleEnv:["chair","table"],description:"A long cherry dining table runs the length of this formal dining room."},Z:{name:"Kitchen",visibleEnv:["maps","backdoor"],description:"It is quite large for a residential kitchen. While only a few of the original appliances remain, gritty outlines on the walls and floor suggest it was once well appointed. Now it is an echoing tile cavern.",smell:"It smells like a dusty abandoned building. And chicken soup."}};return Object.keys(n).forEach(e=>{Object.setPrototypeOf(n[e],t)}),n};var c=function(e){const t={name:"Item",used:!1,weight:1,get description(){return`There is nothing particularly interesting about the ${this.name}.`},takeable:!0,openable:!1,flammable:!1,activated:!1,closed:!1,locked:!1,article:"a",listed:!0,solution:null,points:1,get fireCount(){return this.activated?this.count:0},burn:function(){e.state.objectMode=!1,e.inInventory("matchbook")?(e.items._matchbook.closed=!1,this.flammable?(console.p(`The match's flame proves to be enough to ignite the ${this.name}. You watch as the ${this.name} is quickly transformed into little more than a pile of ash.`),e.inEnvironment(this.name)?e.state.currentMapCell.removeFromEnv(this):e.inInventory(this.name)&&e.removeFromInventory(this)):console.p(`The meager flame is inadequate to ignite the ${this.name}.`)):console.p("You don't have the means to light a fire.")},burnDown:function(){Object.getPrototypeOf(this).burn.call(this),e.dead(`Unsatisfied after having consumed the ${this.name}, the fire quickly moves on to bigger and better things, like turning you and the house you are trapped in to a pile of smoldering embers.`)},climb:function(){e.objectMode=!1,console.p(`You attempt to scale the ${this.name}, but quickly slip, landing painfully on your back. That was pointless.`)},close:function(){e.state.objectMode=!1,e.inEnvironment(this.name)||e.inInventory(this.name)?this.openable?this.closed?console.p("It is already closed."):(console.p(`The ${this.name} is now closed.`),this.closed=!0,this.closedTarget&&(e.mapKey[this.closedTarget].closed=!0)):console.p("It cannot be closed."):console.p(`You don't see ${this.article} ${this.name} here.`)},correctGuess:function(){},drink:function(){e.objectMode=!1,console.p(`You cannot drink the ${this.name}.`)},drop:function(){return e.state.objectMode=!1,e.inInventory(this.name)?(e.removeFromInventory(this),e.state.score-=this.points,e.state.currentMapCell.visibleEnv.push(this),console.p(`${this.name} dropped.`)):console.p("You don't have that.")},eat:function(){e.objectMode=!1,console.p(`You cannot eat the ${this.name}.`)},examine:function(){return e.state.objectMode=!1,console.p(this.description)},extinguish:function(){if(e.state.objectMode=!1,this.fireCount>0)return this.activated=!1,this.count=0,void console.p(`You extinguish the ${this.name}.`);console.p(`The ${this.name} is not lit.`)},flush:function(){e.state.objectMode=!1},incorrectGuess:function(){},lock:function(){if(e.state.objectMode=!1,!this.locked)return e.inInventory(this.unlockedBy)?(this.locked=!0,console.p(`Using the ${this.unlockedBy}, you lock the ${this.name}`),void(this.lockedTarget&&(e.mapKey[this.lockedTarget].locked=!0))):void console.p(`You do not have the means to lock the ${this.name}.`);console.p(`The ${this.name} is already locked.`)},move:function(){console.p(`You cannot move the ${this.name}`)},open:function(){e.state.objectMode=!1,e.inEnvironment(this.name)||e.inInventory(this.name)?this.openable?this.closed?this.locked?console.p("It appears to be locked."):(console.p(`The ${this.name} is now open.`),this.closed=!1,e.state.score+=this.points,this.points=0,this.closedTarget&&(e.mapKey[this.closedTarget].closed=!1)):console.p("It is already open."):console.p("It cannot be opened."):console.p(`You don't see ${this.article} ${this.name} here.`)},read:function(){return e.state.objectMode=!1,this.text?e.inInventory(this.name)?(console.p(`The text on the ${this.name} reads: \n`),console.note(this.text)):console.p(`You will need to pick up the ${this.name} first.`):console.p("There is nothing to read.")},rezrov:function(){e.state.objectMode=!1,e.inInventory("scroll")||e.inEnvironment("scroll")?(this.locked=!1,this.closed=!1,this.lockedTarget&&(e.mapKey[this.lockedTarget].locked=!1),this.closedTarget&&(e.mapKey[this.closedTarget].closed=!1),console.p('Once the rezrov spell is cast, the magic scroll disappears with a sudden flash, and a loud "WHOMP!"'),console.p(`When the smoke has cleared, the ${this.name} has been magically unlocked and opened!`),e.inInventory("scroll")?e.removeFromInventory(e.items._scroll):e.inEnvironment("scroll")&&e.state.currentMapCell.removeFromEnv(e.items._scroll)):console.p("You are incapable of wielding such powerful magic unassisted.")},take:function(){return e.state.objectMode=!1,this.takeable?(e.addToInventory([this]),e.state.score+=this.points,e.state.currentMapCell.removeFromEnv(this),void console.p(`You pick up the ${this.name}.`)):void console.p(`You cannot take the ${this.name}.`)},takeComponent:function(){const t=Object.getPrototypeOf(this);if(!this.takeable||!e.inEnvironment(this))return console.p("You can't take that.");e.addToInventory([this]),e.state.currentMapCell.removeFromEnv(this),t.take.call(t)},turn:function(){e.state.objectMode=!1,console.p(this.reverseDescription?this.reverseDescription:`Turning the ${this.name} has no noticeable effect.`)},unlock:function(){if(e.state.objectMode=!1,this.locked)return e.inInventory(this.unlockedBy)?(this.locked=!1,console.p(`Using the ${this.unlockedBy}, you are able to unlock the ${this.name}`),void(this.lockedTarget&&(e.mapKey[this.lockedTarget].locked=!1))):void console.p(`You do not have the means to unlock the ${this.name}.`);console.p(`The ${this.name} is not locked.`)},use:function(){return e.state.objectMode=!1,console.p(`Try as you might, you cannot manage to use the ${this.name}`)}};return(e=>{for(let n in e){let o=e[n];const r=o.proto,i=r?e[r]:t;Object.setPrototypeOf(o,i)}return e})({_all:{name:"all",listed:!1,takeable:!1,take:function(){e.state.objectMode=!1,e.state.combinedEnv.forEach(e=>e.takeable?e.take():null)},drop:function(){e.state.objectMode=!1,e.state.inventory.filter(e=>"no_tea"!==e.name).forEach(e=>{e.drop()})}},_backdoor:{name:"door",locked:!0,proto:"_door",unlockedBy:"key",lockedTarget:"a",closedTarget:"a"},_basement_door:{name:"door",locked:!0,closed:!0,listed:!0,proto:"_door",unlockedBy:"old_key",lockedTarget:"I",closedTarget:"I"},_bathtub:{name:"bathtub",takeable:!1,description:"The old cast iron tub rests atop four taloned feet. It does not look functional.",use:function(){console.p("This is hardly an appropriate time for a bath!")}},_bed:{name:"bed",flammable:!0,takeable:!1,listed:!1,description:"The antique bedframe is made of tubular bronze. There are not any sheets or blankets or pillows on the old, stained, queen-sized mattress that rests atop it.",burn:function(){Object.getPrototypeOf(this).burnDown.call(this)}},_booklet:{name:"booklet",article:"a",flammable:!0,description:"This booklet appears to be the exhibition catalogue for some fancy art show. ",read:function(){if(e.state.objectMode=!1,!e.inInventory(this.name))return console.p(`You will need to pick up the ${this.name} first.`);e.displayItem({title:"Ministry of Culture",artist:"Isak Berbic, Emiliano Cerna-Rios, Dennis Hodges and Zdenko Mandusic",year:"2008",info:"Exhibition catalog",source:"https://drive.google.com/file/d/0B89dfqio_IykVk9ZMV96TUJESnM/preview?usp=sharing"})}},_books:{name:"books",listed:!1,takeable:!1,description:"While you notice many of the titles as familiar works of classic literature, nothing stands out as being of particular interest.",read:function(){console.p("You cannot possibly read all of these books, and considering you have been abducted by persons unknown and are trapped in a strange house, you have neither the presence of mind, nor the time to sit down with a good book right now.")},proto:"_bookshelves"},_bookshelves:{name:"bookshelves",listed:!1,takeable:!1,article:"some",description:"Wooden bookshelves line one wall of the study, reaching from floor to ceiling. There are hundreds of moldering, hardcover books lining the shelves."},_chain:{name:"chain",weight:0,description:'The thin ball chain dangling in front of you is exactly the sort often connected to a lightbulb. Perhaps you should "pull" it...',takeable:!1,listed:!1,pull:function(){e.state.objectMode=!1;let t=e.state.currentMapCell.hideSecrets;return t?console.p("An overhead lightbulb flickers on, faintly illuminating the room."):console.p("The lightbulb is extinguished."),e.state.currentMapCell.hideSecrets=!t,e.describeSurroundings()},use:function(){return this.pull()}},_chair:{name:"chair",takeable:!1,description:"It looks like a wooden chair– no more, no less.",use:function(){e.state.objectMode=!1,console.p("You sit down on the chair."),e.commands.filter(e=>"_wait"===e[0].name)[0][0].call(this)}},_coffee_table:{name:"coffee_table",listed:!1,takeable:!1,description:function(){return`The low, four-legged table has nothing on it${e.state.env.visibleEnv.includes("photo")?" except for a small, framed photo.":"."}`}},_collar:{name:"collar",description:`It is ${e.state.dogName}'s collar! Whoever assaulted you and took your dog must have come this way!`,smell:function(){console.p("The collar smells like leather and scared doggie!")}},_crowbar:{name:"crowbar",weight:5,description:"It is a typical crowbar, made of hexagonal steel stock, with an unpolished black surface. It weighs about five pounds."},_cup:{name:"cup",weight:2,description:"It is a small, golden cup with two finely wrought handles."},_desk:{name:"desk",takeable:!1,openable:!0,closed:!0,containedPart:"_drawer",description:"The antique writing desk is six feet in length, and blanketed with dust. It has a single drawer on one side.",open:function(){this.closed&&Object.getPrototypeOf(this).open.call(this),e.items[this.containedPart].closed&&(e.items[this.containedPart].closed=!1)},close:function(){this.closed||Object.getPrototypeOf(this).close.call(this),e.items[this.containedPart].closed||(e.items[this.containedPart].closed=!0)}},_disc:{name:"disc",text:"Untitled (Litany)",get description(){return`It is a disc made of a shiny black polymer, lined with hundreds of tiny concentric grooves. It looks to be about seven inches in diameter, with a one and one-half inch hole in its center. It bears a label that says, "${this.text}".`},play:function(){if(e.inEnvironment("phonograph")||e.inInventory("phonograph"))return e.displayItem({title:"\nUntitled (litany)",artist:"Dennis Hodges",year:"2010",info:"Found audio recordings",source:"https://drive.google.com/file/d/1s02tHvAU0E7dMJgbhUnIPNg8ayWGNmxZ/preview?usp=sharing"});console.p("First, you will need to find a phonograph.")},use:function(){this.play.call(this)}},_dog:{name:"dog",points:50,article:"a",takeable:!0,description:"Four legs. barks.",rescue:function(){Object.getPrototypeOf(this).take.call(this)}},_door:{name:"door",article:"a",points:20,openable:!0,locked:!1,closed:!0,takeable:!1,listed:!1,unlockedBy:"key",lockedTarget:"A",closedTarget:"A",get description(){return e.state.objectMode=!1,`The massive wooden door, darkened with generations of dirt and varnish, is secured with a sturdy new deadbolt, which is ${this.locked?"locked.":"unlocked."}${this.closed?"":"\nThe door is open."}`}},_drawer:{name:"drawer",listed:!1,openable:!0,closed:!0,takeable:!1,containedIn:"_desk",contents:[],get description(){return this.closed?"The drawer is closed.":`The drawer is open. There is ${this.contents.length<1?"nothing":e.formatList(this.contents.map(e=>`${e.article} ${e.name}`))} inside.`},open:function(){this.closed&&Object.getPrototypeOf(this).open.call(this),e.items[this.containedIn].closed&&(e.items[this.containedIn].closed=!1)},close:function(){this.closed||Object.getPrototypeOf(this).close.call(this),e.items[this.containedIn].closed||(e.items[this.containedIn].closed=!0)}},_dresser:{name:"dresser",takeable:!1,openable:!0,closed:!0,listed:!0,proto:"_desk",containedPart:"_dresser_drawer",contents:[],get description(){return`The modest wooden dresser is of simple design. The pale blue milk paint that coats it is worn through in several spots from use. It has a large drawer, which is ${this.closed?"closed":"open"}.`},open:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).open.bind(this).call(this),e.open.call(this)},close:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).close.bind(this).call(this),e.close.call(this)}},_dresser_drawer:{name:"drawer",takeable:!1,openable:!0,closed:!0,listed:!1,proto:"_drawer",containedIn:"_dresser",contents:[],open:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).open.bind(this).call(this),e.open.call(this)},close:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).close.bind(this).call(this),e.close.call(this)}},_film:{name:"film",listed:!0,flammable:!0,article:"a reel of",text:"Canned Laughs",description:'The Super 8 film cartridge is made primarily of a clear, smoky plastic body containing a single spool of developed film. It looks a lot like an audio cassette tape, though it is a little thicker, and it is square instead of being merely rectangular. The title, "Canned Laughs", is hand written on a curling paper label.',play:function(){if(e.inEnvironment("projector")||e.inInventory("projector")){if(e.inEnvironment("screen")||e.inInventory("screen"))return e.displayItem({title:"\nCanned Laughs",artist:"Dennis Hodges",year:"2001",info:"Super 8mm film to video transfer with dubbed audio",source:"https://drive.google.com/file/d/0B0gDqpRvgWsgY2o5U1pqckFTQlE/preview"});console.p("You are going to need a screen to project onto.")}else console.p("First, you will need to find something to project the film with.")},use:function(){this.play.call(this)},project:function(){this.play.call(this)}},_filthy_note:{name:"note",text:"Dear John,\nI'm leaving. After all of this time, I said it. But I want you to understand that it is not because of you, or something you've done (you have been a loving and loyal partner). It is I who have changed. I am leaving because I am not the person who married you so many years ago; that, and the incredibly low, low prices at Apple Cabin. Click here ==> http://liartownusa.tumblr.com/post/44189893625/apple-cabin-foods-no-2 to see why I prefer their produce for its quality and respectability.",description:"A filthy note you found on the floor of a restroom. Congratulations, it is still slightly damp. Despite its disquieting moistness, the text is still legible."},_glove:{name:"glove",closed:!0,description:"It is a well-worn gray leather work glove. There is nothing otherwise remarkable about it.",contents:[],examine:function(){if(e.state.objectMode=!1,this.contents.length){const t=this.contents.pop();return console.p(`${this.description}\nAs you examine the glove, a ${t.name} falls out, onto the floor.`),void e.state.currentMapCell.addToEnv(t.name)}return this.description}},_grue:{name:"grue",listed:!1,takeable:!1,turns:3,description:"No adventurer who has seen a grue has yet lived to tell of it.",lurk:function(){e.state.currentMapCell.hideSecrets&&(Math.random()>=.25&&this.turns<1&&e.dead("Oh no! You have walked into the slavering fangs of a lurking grue!"),this.turns--)}},_grue_repellant:{name:"grue_repellant",defective:Math.random()<.03,weight:3,count:3,article:"some",description:"A 12oz can of premium aerosol grue repellant. This is the good stuff. Grues genuinely find it to be somewhat off-putting.",use:function(){return e.state.objectMode=!1,e.inInventory(this.name)?this.used?console.p("Sorry, but it has already been used."):this.defective?(this.used=!0,console.p("Nothing happens. This must be one of the Math.random() < 0.03 of grue_repellant cans that were programmed to be, I mean, that were accidentally manufactured defectively. Repeated attempts to coax repellant from the aerosol canister prove equally fruitless.")):(this.used=!0,this.activated=!0,e.state.repellantMode=!0,console.p("A cloud of repellant hisses from the canister, temporarily obscuring your surroundings. By the time it clears, your head begins to throb, and you feel a dull, leaden taste coating your tongue. The edges of your eyes and nostrils feel sunburnt, and there is also a burning sensation to accompany an unsteady buzzing in your ears. Although you are not a grue, you find it to be more than somewhat off-putting.")):e.inEnvironment(this.name)?console.p("You will need to pick it up first."):console.p("You don't see that here.")},spray:function(){return e.state.objectMode=!1,this.use()},drink:function(){e.state.objectMode=!1,e.dead("Drinking from an aerosol can is awkward at best, but still you manage to ravenously slather your chops with the foaming grue repellant. You try to enjoy the searing pain inflicted by this highly caustic (and highly toxic!) chemical as it dissolves the flesh of your mouth and throat, but to no avail. It is not delicious, and you are starting to realize that there are some non-trivial drawbacks to willingly ingesting poison. Oops.")},decrementCounter:function(){if(this.activated&&this.count>0&&(--this.count,0===this.count))return console.p("The grue repellant has probably worn off by now."),this.activated=!1,void(e.state.repellantMode=!1)}},_key:{name:"key",description:"The shiny key is made of untarnished brass and looks new, like it could have been cut yesterday.",use:function(){const t=e.state.combinedEnv.filter(e=>e.unlockedBy===this.name);t.length<1?console.p(`There is nothing to unlock with the ${this.name}`):t.forEach(e=>e.unlock())}},_knife:{name:"knife",description:"The folding knife has a three inch locking blade and is small enough to fit in your pocket. It is designed to be a utility blade, and would probably make a poor weapon.",use:function(){console.p("The small knife is of no use here.")}},_lantern:{name:"lantern",flammable:!1,activated:!1,proto:"_matchbook",get description(){return`The old brass lantern is the quaint sort that burns hydrocarbons to produce light. It is currently ${this.activated?"lit.":"extinguished."}`},use:function(){e.state.objectMode=!1,e.inInventory("matchbook")?(e.items._matchbook.closed=!1,this.activated=!0,this.count=250,console.p("Lighting the lantern with the match produces a brighter, longer lasting source of light.")):console.p("You don't have the means to light a fire.")},light:function(){this.use.call(this)},burn:function(){this.use.call(this)}},_maps:{name:"maps",article:"some",get description(){return this.read(),"The stack of dogeared pages appear to be architectural drawings. With a quick survey of your surroundings, you confirm with reasonable certainty that they are likely floor plans for this house."},read:function(){if(e.state.objectMode=!1,!e.inInventory(this.name))return console.p(`You will need to pick up the ${this.name} first.`);const t=e.state.position,n=e.maps[t.z].map(e=>e.map(e=>"*"===e?"⬛️":"🌫"));n[t.y].splice(t.x,1,"⭐️");const o=n.slice(8).map(e=>e.slice(5,11));console.map(o)},use:function(){this.read.call(this)}},_matchbook:{name:"matchbook",openable:!0,closed:!0,count:3,flammable:!0,get description(){return`It is an old paper matchbook, of the type that used to be given away with packs of cigarettes, or printed with the name and telephone number of a business and used as marketing schwag. This particular specimen is beige, with black and white text that says "Magnum Opus" in a peculiar, squirming op-art font. ${this.closed?"It is closed, its cardboard cover tucked in.":'The cardboard cover is open, and you can see a handwritten message on the inside. It says, "THE OWLS ARE NOT WHAT THEY SEEM."'}`},decrementCounter:function(){if(this.fireCount&&(--this.count,0===this.count))return console.p("Despite your best efforts the flame flickers out."),void(this.activated=!1)},use:function(){e.state.objectMode=!1,this.closed&&(this.open.call(this),console.p("As you flip open the matchbook, folding back the cover, you glimpse something scrawled in pencil on the inside.")),console.p("You pluck out one of the paper matches. It ignites easily as you scrape its head against the red phosphorus strip, producing a tenuous flame that you are quick to guard with your cupped hand."),this.count=3,this.activated=!0},light:function(){this.use.call(this)}},_nightstand:{name:"nightstand",takeable:!1,openable:!0,closed:!0,listed:!1,proto:"_desk",containedPart:"_nightstand_drawer",contents:[],get description(){return`The nightstand next to the bed is made of wood and is painted white. It has a single drawer, which is ${this.closed?"closed":"open"}.`},open:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).open.bind(this).call(this),e.open.call(this)},close:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).close.bind(this).call(this),e.close.call(this)}},_nightstand_drawer:{name:"drawer",takeable:!1,openable:!0,closed:!0,listed:!1,proto:"_drawer",containedIn:"_nightstand",contents:[],open:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).open.bind(this).call(this),e.open.call(this)},close:function(){const e=Object.getPrototypeOf(this);Object.getPrototypeOf(e).close.bind(this).call(this),e.close.call(this)}},_no_tea:{name:"no_tea",weight:0,article:"",description:"You do not have any tea.",methodCallcount:0,takeable:!1,no_teaMethod:function(t){this.methodCallcount++,e.state.objectMode=!1,console.p(t),this.methodCallcount>1&&"contemplate"!==e.state.pendingAction&&console.p("Perhaps you should take a moment to contemplate that.")},drink:function(){return this.no_teaMethod("How do you intend to drink no tea?")},drop:function(){return this.no_teaMethod("You can't very well drop tea that you don't have.")},take:function(){return this.no_teaMethod("No tea isn't the sort of thing you can take.")},examine:function(){return this.no_teaMethod(this.description)},use:function(){return this.no_teaMethod("Unsurprisingly, using the no tea has no effect.")},contemplate:function(){return this.methodCallcount>2?e.winner("Having thoroughly contemplated the existential ramifications of no tea, you suddenly find that your being transcends all time and space. You are the spoon, so to speak."):this.no_teaMethod("Let's not resort to that just yet!")}},_note:{name:"note",text:"We have your dog.",flammable:!0,firstRead:!0,description:"The note is composed of eclectically sourced, cut-out letters, in the style of a movie ransom note. You found it lying next to you on the floor when you regained consciousness.",read:function(){if(e.state.objectMode=!1,!e.inInventory(this.name))return console.p(`You will need to pick up the ${this.name} first.`);console.ransom(this.text),this.firstRead&&(console.p(`Who would do such a thing to sweet little ${e.state.dogName}!?`),console.p("You need to rescue your puppy and get out of this place before your attacker returns!"),this.firstRead=!1)}},_old_key:{name:"old_key",article:"an",description:"It is an old-fashioned key, made of heavy, tarnished bronze.",proto:"_key"},_painting:{name:"painting",takeable:!0,listed:!1,flammable:!0,description:"The small, grimy image is of an owl, teaching a class a classroom of kittens how to catch mice. The rendering of perspective is amateurish, and the depicted animals look hostile and disfigured. It is an awful painting.",previouslyRevealed:!1,location:"+",take(){Object.getPrototypeOf(this).take.call(this),this.revealText("When you remove the terrible painting, ")},revealText(t){this.previouslyRevealed||(console.p(t+"a small recess is revealed. Within the shallow niche is a small black wall safe, covered with countless shallow dents, scratches and abrasions."),e.mapKey[this.location].hideSecrets=!1,this.previouslyRevealed=!0)},move(){this.revealText("When you move the terrible painting, ")},turn(){this.move()},burn(){e.state.objectMode=!1,e.inInventory("matchbook")?(this.description="The painting is lying broken upon the floor. It is so badly burned now, that its subject has become indecipherable. What remains of the canvas is a carbonized black. You can't help but think that it is still an improvement compared to the original work.",e.items._matchbook.closed=!1,e.state.currentMapCell.hideSecrets?this.revealText("Although the match nearly goes out before you can ignite the painting, a small flame finally finds a foothold on the canvas, and it is soon alarmingly ablaze. Thinking it unwise to burn down the house you are trapped in, you remove the painting from the wall, and stomp out the fire before it can spread any further. \nWhen you look back at the wall that formerly held the burning painting, "):this.revealText("Although the match nearly goes out before you can ignite the painting, a small flame finally finds a foothold on the canvas, and it is soon alarmingly ablaze. You are suddenly inspired to end your ill-considered, if brief flirtation with pyromania, and promptly stomp out the fire before they can spread any further.")):console.p("You don't have the means to light a fire.")}},_pedestal:{name:"pedestal",proto:"_table",description:"It is a simple wooden plinth, painted white."},_phonograph:{name:"phonograph",description:"The old phonograph has a built-in speaker, and looks like it might still work.",play:function(){if(e.inEnvironment("disc")||e.inInventory("disc"))return e.items._disc.play.call(this);console.p("First, you will need to find something to play on the phonograph.")},use:function(){this.play.call(this)}},_photo:{name:"photo",description:"The four by six inch photograph is in a cheap frame made of painted fiberboard. It's a portrait of a very old, and probably infirm black poodle, bluish cataracts clouding its eyes. There is some writing on the back of the frame.",get reverseDescription(){return`There is a handwritten inscription on the back of the frame${e.inInventory(this.name)?'. It says, "My Precious Muffin\'s 18th Birthday - 10/28/17"':""}.`},text:"My Precious Muffin's 18th Birthday - 10/28/17",read:function(){return e.state.objectMode=!1,e.inInventory(this.name)?(console.p(`The text on the ${this.name} reads: \n`),console.cursive(this.text)):console.p(`You will need to pick up the ${this.name} first.`)}},_projector:{name:"projector",description:"It took you a moment to even recognize the brown plastic box as a film projector. It was designed for consumer use, to display Super 8mm film cartridges of the type that were once used to make home movies in the 1970's.",play:function(){if(e.inEnvironment("film")||e.inInventory("film")){if(e.inEnvironment("screen")||e.inInventory("screen"))return e.items._film.play.call(this);console.p("You are going to need a screen to project onto.")}else console.p("First, you will need to find something to project with the projector.")},use:function(){this.play.call(this)},project:function(){this.play.call(this)}},_safe:{name:"safe",points:10,closed:!0,openable:!0,locked:!0,listed:!1,takeable:!1,solution:10281999,description:"The wall safe looks rugged and well-anchored. You doubt that it could be breached by brute force, and it appears to have already successfully weathered a few such attempts. On its face, a numeric keypad resides beneath what looks like a small digital readout.",contents:[],correctGuess:function(){e.state.objectMode=!1,this.locked=!1,this.closed=!1,console.digi("PASSCODE ACCEPTED."),console.p("Upon entering the correct passcode, the bolt inside the safe's door slides back, and the door pops open gently."),this.contents.length>0&&console.p(`Inside the safe is ${e.formatList(this.contents.map(e=>`${e.article} ${e.name}`))}.`)},incorrectGuess:function(){e.state.objectMode=!1,console.digi("PASSCODE INCORRECT")},open:function(){this.locked?this.unlock.call(this):Object.getPrototypeOf(this).open.call(this)},lock:function(){e.state.objectMode=!1,this.closed=!0,this.locked=!0,console.p("You lock the wall safe.")},unlock:function(){e.state.solveMode=!0,e.state.objectMode=!1,this.locked?(console.codeInline(["To enter the 8-digit numerical passcode, you must type an underscore ","_",", followed by the value enclosed in parentheses."]),console.codeInline(["For example: ","_(01234567)"]),console.digi("ENTER PASSCODE:")):console.p("The safe is already unlocked.")},use:function(){this.unlock.call(this)}},_screen:{name:"screen",takeable:!0,description:"It is the type of portable movie screen that rolls up into itself like an old window shade."},_scroll:{name:"scroll",flammable:!0,description:'There is some small text, printed on a thin leather strap that was used to bind the rolled up scroll. It says, "rezrov: Open even locked or enchanted objects". As you unfurl the scroll, there appears to be some writing on the inside surface of the parchment, but each line of text seems to disappear as soon as it is revealed.',text:"rezrov: Open even locked or enchanted objects",use:function(){return window.rezrov},cast:function(){this.use.call(this)}},_sink:{name:"sink",listed:!1,description:"It is an old porcelain sink with separate taps for hot and cold water. Like everything else here, it is covered in dust and grime.",use:function(){console.p("You try to turn on the taps, but nothing comes out.")}},_sofa:{name:"sofa",flammable:!0,listed:!1,description:"The well-worn sitting room sofa is upholstered brown cowhide.",burn:function(){Object.getPrototypeOf(this).burnDown.call(this)}},_table:{name:"table",takeable:!1,listed:!1,description:"The cherrywood dining table is long enough to accomodate at least twenty guests, by your estimation, although you can see only one chair."},_toilet:{name:"toilet",listed:!1,description:"You are surprised to find that the bowl of the very old porcelain toilet is still full of water.",text:"Thomas Crapper % Co.",flush:function(){e.state.objectMode=!1,console.p("Having pushed the lever, and watched the water exit the bowl, you can personally verify that the toilet works as expected.")}},_wardrobe:{name:"wardrobe",takeable:!1,openable:!0,closed:!0,listed:!1,contents:[],get description(){const t=`The oak wardrobe is roughly four feet wide and seven feet in height and is currently${this.closed?" closed":" open"}. `;return this.closed?t:t+`There is ${this.contents.length<1?"nothing":e.formatList(this.contents.map(e=>`${e.article} ${e.name}`))} inside.`}}})};const h={bed:["bedframe","mattress"],booklet:["catalog","catalogue","book","program","📓"],bookshelves:["bookshelf","shelf","shelves"],burn:["ignite","incinerate","immolate"],collar:["dog_collar","leash"],contemplate:["consider","meditate","think","cogitate","cerebrate","ponder","excogitate","muse","reflect","mull","ruminate"],cup:["chalice","goblet"],disc:["record","album","forty-five","disk","recording","litany"],drink:["intake","uptake","imbibe","chug","guzzle","quaff"],drop:["unload","discharge","dismiss","shed","discard","release","shitcan","trash","expel","abandon","forsake"],eat:["ingest","consume","swallow","devour"],examine:["analyze","analyse","study","investigate","inspect","scan","search"],extinguish:["douse"],film:["movie","reel","cartridge","film_cartridge"],glove:["mitt","gloves","handwear","mitten","mittens"],go:["travel","locomote","proceed","depart","exit","leave","run"],grue_repellant:["repellant","aerosol","spray"],inventory:["booty","bounty","hoard","possessions","belongings"],lantern:["lamp","torch"],listen:["hear"],lock:["deadbolt"],look:["see","observe","status"],maps:["map","plan","plans","blueprints","blueprint"],matchbook:["matches","match"],move:["displace","upend","push"],note:["letter","missive","paper","epistle","treatise"],open:["unclose"],painting:["canvas","artwork"],phonograph:["record_player","turntable"],photo:["photograph","picture","pic","portrait","frame","picture_frame"],pull:["tug","yank","jerk"],read:["skim","peruse"],safe:["alcove","strongbox","vault","wall_safe"],scroll:["strap","parchment","spell"],smell:["sniff"],spray:["squirt","spurt","spirt","scatter","sprinkle","disperse","dispense"],take:["acquire","steal","purloin","pilfer","obtain","gank","get","appropriate","arrogate","confiscate","retrieve","remove"],toilet:["commode","crapper","loo","head"],turn:["flip","rotate","revolve","twist"],use:["activate","utilize","utilise","apply","employ","exploit","expend"],wait:["abide","await","delay","tarry","chill","exist","dawdle","dillydally","loiter","pause","rest","relax","remain","hesitate","procrastinate","sit"],yell:["shout","scream","cry"]},f=Object.entries(h).reduce((e,t)=>[e,...t]),d=f.filter((e,t)=>f.indexOf(e)!==t);if(d.length)throw Error(`Duplicates found in thesaurus.js:\n${d}`);var p=h;var m=function(e){const{_start:t,_help:n,_commands:o,_restore:r,_save:i,_save_slot:a,_quit:l,_resume:c,mapKey:h,displayItem:f,cases:d}=e,m=e.toggleVerbosity.bind(e),g=t=>{e.objectMode=!1;let n={x:e.state.position.x,y:e.state.position.y,z:e.state.position.z};switch(t){case"north":n.y=n.y-1;break;case"south":n.y=n.y+1;break;case"east":n.x=n.x+1;break;case"west":n.x=n.x-1;break;case"up":n.z=n.z+1;break;case"down":n.z=n.z-1}const o=u[n.z][n.y][n.x];return"*"===o?(console.p("You can't go that direction"),void(e.state.abortMode=!0)):e.mapKey[o].locked||e.mapKey[o].closed?(console.p("The way is blocked."),void console.p(e.mapKey[o].lockText&&(e.mapKey[o].locked||e.mapKey[o].closed)?e.mapKey[o].lockText:"")):(console.p(`You walk ${t}...`),e.state.position={x:n.x,y:n.y,z:n.z},e.describeSurroundings())},v=t=>{e.state.objectMode=!0,e.state.pendingAction=t,console.p(`What would you like to ${t}?`)},y=()=>{},b=t=>{e.state.prefMode=!0,e.state.pendingAction=t,console.codeInline([`To set the value of ${t}, you must type an underscore `,"_",", followed by the value enclosed in backticks ","`","."]),console.codeInline(["For example: ","_`value`"])},_=t=>{if(!e.state.objectMode&&"maps"!==t)return void console.trace("Invalid command");const n=e.inEnvironment(t)||e.inInventory(t);if(!n)return e.state.objectMode=!1,void console.p(`The ${t} is unavailable.`);n[e.state.pendingAction]()},w=(e,t=null,n="")=>{let o=[];return t&&(o=(t[e]||[]).filter(e=>{if(-1===e.indexOf(" "))return d(e)})),`${d(e)},${o.join()}${n?","+n:""}`},k=[[g,d("north")+",n,N"],[g,d("south")+",s,S"],[g,d("east")+",e,E"],[g,d("west")+",w,W"],[g,d("up")+",u,U"],[g,d("down")+",d,D"],[()=>{console.p("Which direction do you want to go?")},w("go",p)],[t=>{let n=[],o=[];e.state.inventory.forEach(e=>{n.push(e.name);const t=e.article?`${e.article} ${e.name}`:e.name;o.push(t)});let r=`You are carrying ${e.formatList(o)}`.split(" "),i=r.map(e=>{let t=s;return n.map(n=>{e.includes(n)&&(t="font-size:120%;color:cyan;font-style:italic;")}),t});return r=r.map((e,t)=>t===r.length-1?`${e}.`:`${e} `),console.inline(r,i)},w("inventory",p)+",i,I"],[t=>{console.p(e.state.currentMapCell.sound)},w("listen",p)],[t=>e.describeSurroundings(),w("look",p)+",l,L"],[t=>{console.p(e.state.currentMapCell.smell)},w("smell",p)],[()=>{console.p("Time passes...")},w("wait",p)+",z,Z,zzz,ZZZ,Zzz"],[()=>{console.scream("Aaaarrgh!!!!")},w("yell",p)],[v,w("burn",p)],[v,w("climb",p)],[v,w("close",p)],[v,w("contemplate",p)],[v,w("drink",p)],[v,w("drop",p)],[v,w("eat",p)],[v,w("examine",p)+",x,X"],[v,w("extinguish",p)],[v,w("flush",p)],[v,w("light",p)],[v,w("lock",p)],[v,w("move",p)],[v,w("open",p)],[v,w("play",p)],[v,w("project",p)],[v,w("pull",p)],[v,w("read",p)],[v,w("rezrov",p)],[v,w("cast",p)],[v,w("rescue",p)],[v,w("spray",p)],[v,w("take",p)],[v,w("turn",p)],[v,w("unlock",p)],[v,w("use",p)],[o,d("commands")+",c,C"],[n,d("help")+",h,H"],[t=>{const n=e.state.inventory.map(e=>{const{name:t,description:n}=e;return{name:t,description:n}});return console.table(n,["name","description"])},d("inventoryTable","invTable","invt")],[m,d("verbose")],[()=>{if(e.state.confirmMode)return e.confirmationCallback?e.confirmationCallback():void 0;console.p("nope.")},d("yes")+",y,Y"],[()=>{console.p(`Your score is ${e.state.score} in ${e.state.turn} turns.`)},d("score")],[t,d("start","begin","commence")],[c,d("resume","proceed")],[l,d("quit","restart")],[l,d("restart")],[i,d("save")],[a,"_0"],[a,"_1"],[a,"_2"],[a,"_3"],[a,"_4"],[a,"_5"],[a,"_6"],[a,"_7"],[a,"_8"],[a,"_9"],[b,d("font")],[b,d("color")],[b,d("size")],[()=>{const e=document.querySelector("body");return e.parentNode.removeChild(e),console.papyracy(">poof<")},d("poof")],[y,d("globaa")],[y,d("thia")]],x=Object.keys(e.items).map(e=>e.slice(1)).map(e=>[_,w(e,p)]);return k.concat(x)},g=["Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Avant Garde","Calibri","Candara","Century Gothic","Franklin Gothic Medium","Futura","Geneva","Gill Sans","Helvetica","Impact","Lucida Grande","Optima","Segoe UI","Tahoma","Trebuchet MS","Verdana","Big Caslon","Bodoni MT","Book Antiqua","Calisto MT","Cambria","Didot","Garamond","Georgia","Goudy Old Style","Hoefler Text","Lucida Bright","Palatino","Perpetua","Rockwell","Rockwell Extra Bold","Baskerville","Times New Roman","Consolas","Courier New","Lucida Console","Lucida Sans Typewriter","Monaco","Andale Mono","Copperplate","Papyrus","Brush Script MT"];console.ransom=e=>{const t=w(e).split(""),n=`background-color: unset;font-size:${Math.random()}em`,o=t.map(e=>{const{foreground:t,background:o,border:r}=v(),[i,a,s]=t,[u,l,c]=o,h=`font-family:${x()};color:rgb(${i}, ${a}, ${s});font-size:${3+Math.random()/2}em;line-height:${Math.random()+.5}em;background-color:rgb(${u}, ${l}, ${c});${y()}${k(r)}`;return" "===e?n:h}),r=t.join(" ").split(""),i=o.map(e=>[e,`font-size:${1+Math.random()}em;`]).flat().slice(0,-1);console.inline(r,i)};const v=()=>{const e=Math.random()>.85;return{foreground:e?_(0,64):b([64,64,64],128),background:e?_(192,255):b([255,255,255],75),border:e?_(0,128):b([128,128,128],128)}},y=(e=3,t=1)=>`padding: ${Math.random()*e+t}px ${Math.random()*e+t}px ${Math.random()*e+t}px ${Math.random()*e+t}px;`,b=([e,t,n]=[128,128,128],o=25)=>{const r=(e,t)=>{const n=Math.floor(Math.random()*o),r=Math.random()>=.5?-1*n:n;return Math.max(Math.min(255,e+r),0)};return[r(e),r(t),r(n)]},_=(e,t)=>{const n=Math.floor(Math.random()*(t-e)+e);return[n,n,n]},w=e=>{return e.split("").map(e=>{const t=Math.random();return t<.25?e:t<.66?e.toUpperCase():e.toLowerCase()}).join("")},k=e=>{const t=Math.random()>.45?1.75*Math.random():0,[n,o,r]=e||b([128,128,128],128),i=`rgb(${n}, ${o}, ${r})`;return`text-shadow: -${t}px -${t}px ${i}, ${t}px -${t}px ${i}, -${t}px ${t}px ${i}, ${t}px ${t}px ${i};`},x=()=>{const e=Math.floor(Math.random()*g.length);return g[e]};(()=>{window.debugLog=[];const e=function(e,t,n="log"){window.CONSOLE_GAME_DEBUG&&window.debugLog.push({gameOutput:e}),console[n](`%c${e}`,t)};console.custom=(t,n)=>{e(t,n)},console.h1=t=>{e(t,`font-size:125%;color:pink;font-family:${r};`)},console.intro=t=>{e(t,`font-size:calc(1.25 * ${a});color:orange;font-family:${r};padding:0 1em;line-height:1.5;`)},console.cursive=t=>{e(t,`font-size:calc(1.2 * ${a});font-family:cursive;font-weight:bold;color:lightgray;background-color:black;line-spacing:2em;padding:1em;margin:0 auto  0 0;white-space:pre-wrap;text-align:center;`)},console.note=t=>{e(t,`font-size:calc(1.2 * ${a});font-family:courier new;font-weight:bold;color:#75715E;background-color:white;line-spacing:2em;padding:0 1em 1em;margin:0 auto  0 0;white-space:pre-wrap;`)},console.warning=t=>{e(t,`font-size:calc(1.15 * ${a});color:orange;`,logType="warn")},console.papyracy=t=>{e(t,`font-size:calc(1.4 * ${a});color:beige;font-family:Papyrus;`)},console.p=t=>{e(t,`font-size:calc(1.2 *${a});color:${i};font-family:${r};padding:0 1em;line-height:1.5;`)},console.tiny=t=>{e(t,`font-size:calc(0.5 * ${a});color:#75715E;font-family:${r};`)},console.info=t=>{e(t,`font-size:calc(1.15*${a});padding:0.5em 1em 0 0.5em;font-family:${r};`)},console.invalid=t=>{e(t,`font-size:calc(1.2 * ${a});color:red;font-family:${r};padding:0 1em;`)},console.inventory=t=>{e(t,`font-size:calc(1.2 * ${a});color:cyan;font-family:${r};padding:0 1em;`)},console.title=t=>{e(t,`font-size:calc(2.5 * ${a});font-weight:bold;color:orangered;text-shadow:orange 2px 2px 5px;goldenrod -2px -2px 5px;font-family:Courier;padding:0 1em;margin:0 auto 0 35%;border: 2px dashed goldenrod;`)},console.win=t=>{e(t,`font-size:calc(2.5 * ${a});font-weight:bold;color:gold;text-shadow:orange 2px 2px 5px;goldenrod -2px -2px 5px;font-family:Courier;padding:0 1em;animation:flashing 0.8s infinite;`)},console.header=t=>{e(t,`font-size:calc(1.25 * ${a});font-weight:bold;color:${i};font-family:${r};padding:0 1em;`)},console.groupTitle=t=>{e(t,`font-size:calc(1.25 * ${a});color:#75EA5B;font-family:${r}`,"group")},console.inline=(e,t)=>{const n=e.map(e=>`%c${e}`).join("");console.log(n,...t)},console.codeInline=(e,t,n)=>{t=`font-size:calc(1.15*${a});font-family:${r};font-weight:inherit;line-height:1.5;padding-top:0.5em;`+(t||""),n=`font-family:courier;font-weight:bold;line-height:1.5;padding-top:0.5em;font-size:calc(1.35*${a});color:lime;`+(n||"");const o=Array(e.length).fill(t).map((e,t)=>t%2!=0?n:e);console.inline(e,o)},console.digi=e=>{const t=e.split("").join(" ").split(""),n=t.map(e=>`font-family:'courier new';color:rgb(${255+Math.floor(10*Math.random())}, ${68+Math.floor(10*Math.random())}, ${0+Math.floor(10*Math.random())});font-size:${1.5+Math.random()/4}em;opacity:${1-Math.random()/2}`);console.inline(t,n)},console.map=e=>console.table(e.map(e=>e.join(""))),console.scream=e=>{const t=e.split(""),n=t.map((e,t)=>`font-family:'courier new';color:rgb(${255+Math.floor(10*Math.random())}, ${33+Math.floor(10*Math.random())}, ${33+Math.floor(10*Math.random())});font-size:${2+t/3}em;`);console.inline(t,n)}})();const I=["Max","Buddy","Charlie","Jack","Cooper","Rocky","Toby","Tucker","Jake","Bear","Duke","Teddy","Oliver","Riley","Bailey","Bentley","Milo","Buster","Cody","Dexter","Winston","Murphy","Leo","Lucky","Oscar","Louie","Zeus","Henry","Sam","Harley","Baxter","Gus","Sammy","Jackson","Bruno","Diesel","Jax","Gizmo","Bandit","Rusty","Marley","Jasper","Brody","Roscoe","Hank","Otis","Bo","Joey","Beau","Ollie","Tank","Shadow","Peanut","Hunter","Scout","Blue","Rocco","Simba","Tyson","Ziggy","Boomer","Romeo","Apollo","Ace","Luke","Rex","Finn","Chance","Rudy","Loki","Moose","George","Samson","Coco","Benny","Thor","Rufus","Prince","Chester","Brutus","Scooter","Chico","Spike","Gunner","Sparky","Mickey","Kobe","Chase","Oreo","Frankie","Mac","Benji","Bubba","Champ","Brady","Elvis","Copper","Cash","Archie","Walter","Bella","Lucy","Daisy","Molly","Lola","Sophie","Sadie","Maggie","Chloe","Bailey","Roxy","Zoey","Lily","Luna","Coco","Stella","Gracie","Abby","Penny","Zoe","Ginger","Ruby","Rosie","Lilly","Ellie","Mia","Sasha","Lulu","Pepper","Nala","Lexi","Lady","Emma","Riley","Dixie","Annie","Maddie","Piper","Princess","Izzy","Maya","Olive","Cookie","Roxie","Angel","Belle","Layla","Missy","Cali","Honey","Millie","Harley","Marley","Holly","Kona","Shelby","Jasmine","Ella","Charlie","Minnie","Willow","Phoebe","Callie","Scout","Katie","Dakota","Sugar","Sandy","Josie","Macy","Trixie","Winnie","Peanut","Mimi","Hazel","Mocha","Cleo","Hannah","Athena","Lacey","Sassy","Lucky","Bonnie","Allie","Brandy","Sydney","Casey","Gigi","Baby","Madison","Heidi","Sally","Shadow","Cocoa","Pebbles","Misty","Nikki","Lexie","Grace","Sierra"];firebase.initializeApp({apiKey:"AIzaSyD50gAQQpS8HKdOJWWFb5z5YQPzjZNLkeE",authDomain:"consolegamelog.firebaseapp.com",databaseURL:"https://consolegamelog.firebaseio.com",projectId:"consolegamelog",storageBucket:"",messagingSenderId:"836026474461",appId:"1:836026474461:web:2c86056691522895"});const M=firebase.firestore().collection("games");var $=async()=>{const e=String(new Date),t=(async()=>await fetch("https://ipinfo.io/json/?token=312e90479fdd9b").then(e=>e.json().then(e=>e)))(),n=M.add({creationDate:e,userData:await t,gameLog:window.debugLog||[]}).then(e=>e).catch(e=>{});return await n};n(0);const j={maps:[...u],key:{...l(void 0)},timeLimit:300,state:{objectMode:!1,saveMode:!1,restoreMode:!1,prefMode:!1,confirmMode:!1,solveMode:!1,abortMode:!1,verbose:!1,inventory:[],history:[],score:0,maxScore:100,turn:null,pendingAction:null,gameOver:!1,startPosition:{z:3,y:13,x:7},position:{z:3,y:13,x:7},dogName:"Spike",get currentCellCode(){return j.maps[this.position.z][this.position.y][this.position.x]},get currentMapCell(){return j.mapKey[this.currentCellCode]},get env(){return this.currentMapCell.env},get combinedEnv(){return Object.values(this.env).flat()}},get mapKey(){return this.key},set mapKey(e){this.key=e},get lightSources(){return Object.values(this.items).filter(e=>"_matchbook"===e.proto||"matchbook"===e.name)},exemptCommands:["help","start","commands","inventory","inventorytable","look","font","color","size","save","restore","resume","verbose","_save_slot","yes","_0","_1","_2","_3","_4","_5","_6","_7","_8","_9"],turnDemon:function(e,t){if(this.state.gameOver)return console.log(e),console.codeInline(["[Game over. Please type ","start ","to begin a new game.]"]);window.CONSOLE_GAME_DEBUG&&(window.debugLog.push({userInput:e}),this.firestoreGameRef&&this.firestoreGameRef.update({gameLog:window.debugLog}));try{return this.exemptCommands.includes(e)?(t(e),this.state.verbose?this.describeSurroundings():null):(t(e),this.addToHistory(e),this.state.objectMode||this.state.abortMode||(this.timers(),this.state.turn++),this.state.abortMode=!1,void(this.state.verbose&&this.describeSurroundings()))}catch(e){return console.trace(e),console.p("That's not going to work. Please try something else.")}},addToHistory:function(e){this.state.history.push(e),window.localStorage.setItem("ConsoleGame.history",this.state.history)},replayHistory:function(e){return this.state.restoreMode=!1,this.initializeNewGame(),console.groupCollapsed("Game loading..."),e.split(",").map(e=>{Function(`${e}`)()}),console.groupEnd("Game loaded.")},addToInventory:function(e){e.map(e=>e instanceof String?this.state.inventory.push(this.items[`_${e}`]):this.state.inventory.push(e))},removeFromInventory:function(e){this.state.inventory.splice(this.state.inventory.indexOf(e),1)},resetGame:function(){this.state.objectMode=!1,this.state.saveMode=!1,this.state.restoreMode=!1,this.state.prefMode=!1,this.state.confirmMode=!1,this.state.solveMode=!1,this.state.abortMode=!1,this.state.verbose=!1,this.state.inventory=[],this.state.history=[],this.state.turn=0,this.state.score=0,this.state.gameOver=!1,this.state.pendingAction=null,this.state.position=this.state.startPosition,window.localStorage.removeItem("ConsoleGame.history")},formatList:function(e,t=!1){const n=e.length,o=t?"or":"and";return 0===n?"nowhere":1===n?e[0]:2===n?`${e[0]} ${o} ${e[1]}`:`${e[0]}, ${this.formatList(e.slice(1),t)}`},cases:function(...e){let t,n;return e.map(e=>(t=e.toLowerCase(),n=[t,`${t.charAt(0).toUpperCase()}${t.slice(1)}`,t.toUpperCase()],e.length?n:"")).join(",")},possibleMoves:function(e,t,n){return[void 0!==u[e][t-1]&&"*"!==u[e][t-1][n]&&"north",void 0!==u[e][t+1]&&"*"!==u[e][t+1][n]&&"south",void 0!==u[e][t][n+1]&&"*"!==u[e][t][n+1]&&"east",void 0!==u[e][t][n-1]&&"*"!==u[e][t][n-1]&&"west",void 0!==u[e+1]&&"*"!==u[e+1][t][n]&&"up",void 0!==u[e-1]&&"*"!==u[e-1][t][n]&&"down"].filter(e=>e)},movementOptions:function(){return this.formatList(this.possibleMoves(this.state.position.z,this.state.position.y,this.state.position.x),!0)},describeSurroundings:function(){const e=this.state.currentMapCell.description,t=this.itemsInEnvironment()?`You see ${this.itemsInEnvironment()} here.`:"",n=this.nestedItemString(),o=`You can go ${this.movementOptions()}.`;return console.header(this.currentHeader()),console.p(e+"\n"+o+"\n"+t+"\n"+n)},currentHeader:function(e=80){const t=this.state.currentMapCell.name,n=`Turn : ${this.state.turn}`,o=e-t.length-n.length;return`\n${t}${" ".repeat(o)}${n}\n`},inInventory:function(e){if("all"===e)return this.items._all;const t=this.state.inventory.map(e=>e.name).indexOf(e);return-1!==t&&this.state.inventory[t]},inEnvironment:function(e){if("all"===e)return this.items._all;const t=this.fromWhichEnv(e);return!!t&&this.state.env[t].filter(t=>t.name===e)[0]},fromWhichEnv:function(e){if(!this.state.combinedEnv.map(e=>e.name).includes(e))return!1;const t=Object.entries(this.state.env).map(e=>{const t=e[1].length?e[1].map(e=>e.name):[];return[e[0],t]}).filter(t=>t[1].includes(e));return t.length>0?t[0][0]:"containedEnv"},itemsInEnvironment:function(){const e=(this.state.currentMapCell.hideSecrets?this.state.env.visibleEnv:this.state.env.visibleEnv.concat(this.state.env.hiddenEnv)).filter(e=>e.listed);return e.length&&this.formatList(e.map(e=>`${e.article} ${e.name}`))},nestedItemString:function(){return this.state.currentMapCell.openContainers.map(e=>{const t=`${e.article} ${e.name}`,n=e.contents.map(e=>`${e.article} ${e.name}`);return[t,this.formatList(n)]}).map(e=>`There is ${e[0]}, containing ${e[1]}.`).join("\n")},displayItem:function(e={title:"untitled",artist:"unknown",info:null,source:"",dimensions:null}){const t=document.getElementById("console-game-content");t.innerHTML="",t.setAttribute("style","width:100vw;background-color:#D1D1D1;padding-top:75%;position:relative;display:flex;flex-direction:column;justify-content:center;align-content:center;");const n=document.createElement("iframe");n.src=e.source,n.autoplay=!0,n.setAttribute("style","width:50vw;height:37.5vw;background-color:gray;top:0;position:sticky;position:absolute;msrgin-left:auto;");const o=document.createElement("p"),r=document.createElement("h2");r.setAttribute("style","color:black;");const i=r.cloneNode(!0);if(r.innerHTML=`Title: ${e.title}`,i.innerHTML=`Artist: ${e.artist}`,o.appendChild(r),o.appendChild(i),t.appendChild(n),t.appendChild(o),e.info){const n=document.createElement("p");n.innerHTML=e.info,n.setAttribute("style","color:black;font-style:italic;font-size:1em;padding-bottom:2em;"),t.appendChild(n)}},timers:function(){if(2!==this.state.turn||this.items._door.locked||(console.p("You hear a short metallic scraping sound, ending in a click. It sounds like the front door being locked from the outside.\n"),this.items._door.closed=!0,this.items._door.locked=!0,this.mapKey[this.items._door.lockedTarget].locked=!0,this.mapKey[this.items._door.closedTarget].closed=!0),this.state.turn>=this.timeLimit&&!this.state.gameOver)return this.dead("You don't feel so well. It never occurs to you, as you crumple to the ground, losing consciousness for the final time, that you have been poisoned by an odorless, invisible, yet highly toxic gas.");this.lightSources.forEach(e=>e.decrementCounter()),this.inEnvironment("grue")&&this.items._grue.lurk()},dead:function(e){console.p(e),console.p("You have died. Of course, being dead, you are unaware of this unfortunate turn of events. In fact, you are no longer aware of anything at all."),window.localStorage.removeItem("ConsoleGame.history"),this.state.gameOver=!0,console.codeInline(["[Game over. Please type ","start ","to begin a new game.]"])},captured:function(){console.p('As you step out onto the front porch, you struggle to see in the bright midday sun, your eyes having adjusted to the dimly lit interior of the house. You hear a surprised voice say, "Hey! How did you get out here?!" You spin around to see the source of the voice, but something blunt and heavy has other plans for you and your still aching skull. You descend back into the darkness of sleep.'),this.state.position=this.state.startPosition,this.state.turn+=3;for(let e=0;e<3;e++)window.wait;this.items._door.closed=!0,this.items._door.locked=!0,this.mapKey[this.items._door.lockedTarget].locked=!0,this.mapKey[this.items._door.closedTarget].closed=!0,console.p("Groggily, you lift yourself from the floor, your hands probing the fresh bump on the back of your head.")},winner:function(e){e&&console.p(e),console.win("You win!! Congratulations and thanks for playing!"),window.localStorage.removeItem("ConsoleGame.history"),this.state.gameOver=!0,console.codeInline(["[Game over. Please type ","start ","to begin a new game.]"])},_restore:function(e){let t=Object.keys(localStorage).filter(e=>-1!==e.indexOf("ConsoleGame.save"));if(t.length>0){let n=t.map(e=>{return e.substring(e.length-2)});console.codeInline(["saved games:\n",n]),this.state.restoreMode=!0,this.state.saveMode=!1,this.state.pendingAction=e;return console.info("Please choose which slot number (0 – 9) to restore from. To restore, type an underscore, ","_ ","immediately followed by the slot number."),console.codeInline(["For example, type ","_3"," to select slot 3."])}return console.invalid("No saved games found.")},_restoreGame:function(e){this.state.restoreMode=!1;let t=localStorage.getItem(`ConsoleGame.save.${e}`);return this.resetGame(),this.replayHistory(t),this.describeSurroundings()},_save:function(e){this.state.saveMode=!0,this.state.restoreMode=!1,this.state.pendingAction=e;console.info("Please choose a slot number (_0 through _9) to save your game. To save to the selected slot, type an underscore, immediately followed by the slot number."),console.codeInline(["For example, type ","_3"," to select slot 3."])},_save_slot:function(e){if(this.state.saveMode)try{return this._saveGame(e)}catch(t){return console.invalid(`Save to slot ${e} failed.`),console.trace(t)}else if(this.state.restoreMode)try{return this._restoreGame(e),this.state.restoreMode=!1}catch(t){return console.invalid(`Restore from slot ${e} failed.`),console.trace(t)}else console.invalid("Operation failed.")},_saveGame:function(e){const t=`ConsoleGame.save.${e}`;if(localStorage.getItem(t)&&!this.state.confirmMode)return console.invalid("That save slot is already in use."),console.codeInline(["type ","yes ",`to overwrite slot ${e} with current game data.`]),this.state.confirmMode=!0,void(this.confirmationCallback=()=>this._saveGame(e));this.state.saveMode=!1,this.state.confirmMode=!1;try{localStorage.setItem(t,this.state.history),console.info(`Game saved to slot ${e}.`),this.describeSurroundings()}catch(t){return console.invalid(`Save to slot ${e} failed.`)}},_quit:function(){return this.resetGame(),location.reload(),"reloading..."},initCommands:function(e){e.map(e=>{let[t,n]=e;this.bindCommandToFunction(t,n)})},bindCommandToFunction:function(e,t,n=this.turnDemon){const o=t.split(","),r=o[0],i=n?n.bind(this,r,e):e.bind(this,r);try{o.map(e=>{Object.defineProperty(window,e.trim(),{get:i})})}catch(e){}},bindInitialCommands:function(){[[this._start,this.cases("start","begin")],[this._resume,this.cases("resume")],[this._help,this.cases("help")+",h,H,ayuda"],[this._commands,this.cases("command","commands")],[this._restore,this.cases("restore","load")],[this._quit,this.cases("quit","restart")],[this._save,this.cases("save")],[this._save_slot,"_0"],[this._save_slot,"_1"],[this._save_slot,"_2"],[this._save_slot,"_3"],[this._save_slot,"_4"],[this._save_slot,"_5"],[this._save_slot,"_6"],[this._save_slot,"_7"],[this._save_slot,"_8"],[this._save_slot,"_9"]].map(e=>{const[t,n]=e;this.bindCommandToFunction(t,n,null)})},setPreference:function(e){console.info(`value for ${this.state.pendingAction} will be set to ${e}`),localStorage.setItem(`ConsoleGame.prefs.${this.state.pendingAction}`,e),localStorage.setItem("ConsoleGame.prefMode","true"),location.reload()},solveCode:function(e){this.state.solveMode=!1;const t=this.state.combinedEnv.filter(e=>e.solution);if(t.length<1)return;const n=t.filter(t=>t.solution===e);0!==n.length?n.forEach(e=>e.correctGuess()):t.forEach(e=>e.incorrectGuess())},unfinishedGame:function(){return window.localStorage.getItem("ConsoleGame.history")},intro:function(){console.title("consoleGame"),console.custom("by Dennis Hodges\ncopyright 2019","font-size:100%;color:lightgray;padding:0 1em;"),console.intro("\nWelcome!\nAs a fan of old Infocom™ interactive fiction games, I thought it would be fun to hide a text adventure in the browser's JavaScript console. Try it out by typing in the console below. Have fun!\n"),console.codeInline(this.introOptions())},introOptions:function(){const e=["[ It looks like you have an unsaved game in progress from a previous session. If you would like to continue, type ","resume",". If you would like to load a saved game, type ","restore",". To begin a new game, please type ","start",". ]"],t=["[ Please type ","help ","for instructions, ","restore ","to load a saved game, or "],n=[...t,"resume ","to resume the game. ]"],o=[...t,"start ","to start the game. ]"];return null===this.state.turn?this.unfinishedGame()?e:o:n},preface:function(){console.p("You slowly open your eyes. Your eyelids aren't halfway open before the throbbing pain in your head asserts itself. The last thing you can remember is taking your dog for a walk. Your current surroundings look entirely unfamiliar.")},stockDungeon:function(e){Object.keys(this.mapKey).map(t=>{let n=this.mapKey[t][e],o=[];return n.length&&n.forEach(e=>{let t="string"==typeof e?this.items[`_${e}`]:e;t?o.push(t):console.log(`Cannot stock ${e}. No such item.`)}),this.mapKey[t][e]=o,o})},initializeNewGame:function(){window.CONSOLE_GAME_DEBUG&&$().then(e=>{this.firestoreGameID=e.id,this.firestoreGameRef=e}),this.resetGame(),this.state.dogName=(()=>I[Math.floor(Math.random()*I.length)])(),this.items={...new c(this)},this.mapKey={...new l(this)},this.commands=[...new m(this)],this.initCommands(this.commands),this.stockDungeon("hiddenEnv"),this.stockDungeon("visibleEnv"),this.items._glove.contents.push(this.items._matchbook),this.items._safe.contents.push(this.items._key,this.items._scroll),this.items._drawer.contents.push(this.items._film),this.items._nightstand_drawer.contents.push(this.items._old_key),this.items._wardrobe.contents.push(this.items._grue_repellant),this.items._dresser_drawer.contents.push(this.items._booklet),this.addToInventory([this.items._no_tea])},_start:function(){return(this.state.turn<1||this.state.gameOver)&&this.initializeNewGame(),this.preface(),this.describeSurroundings()},_resume:function(){const e=this.unfinishedGame();if(this.state.prefMode=!1,e)return this.replayHistory(e),void this.describeSurroundings();this.state.turn?this.describeSurroundings():this._start()},_help:function(){const e=`font-family:${r};color:pink;font-size:105%;line-height:1.5;`,t="font-family:courier;color:#29E616;font-size:115%;font-style:italic;line-height:2;",n="font-family:courier;color:#29E616;font-size:115%;line-height:1.5;",o=[e,n,t,n,t,e,n,t];console.inline(["Valid commands are one word long, with no spaces. Compound commands consist of at most two commands, separated by a carriage return or a semicolon. For example:\n","get\n","What would you like to take?\n","lamp\n","You pick up the lamp.\n","or,\n","get;lamp\n","What would you like to take?\nYou pick up the lamp."],o);console.codeInline(["Typing ","inventory ","or ","i ","will display a list of any items the player is carrying. \nTyping ","look ","or ","l ","will give you a description of your current environs in the game. \nCommands with prepositions are not presently supported, and ","look ",'can only be used to "look around", and not to "look at" something. Please instead use ',"examine ","or its shortcut ","x ","to investigate an item's properties. \nThe player may move in the cardinal directions– ","north",", ","south",", ","east"," and ","west ","as well as ","up ","and ","down. ","Simply type the direction you want to move. These may be abbreviated as ","n",", ","s",", ","e",", ","w",", ","u ","and ","d ",", respectively."],e,n);console.codeInline(["You may save your game progress (it will be saved to localStorage) by typing ","save",". You will then be asked to select a save slot, ","_0 ","through ","_9 ","(remember, user input can't begin with a number). Typing ","help ","will display the in-game help text."],e,n),console.codeInline(this.introOptions(this.state.turn))},toggleVerbosity:function(){if(this.state.verbose)return this.state.verbose=!1,void console.p("Verbose mode off.");this.state.verbose=!0,console.p("Maximum verbosity.")},_commands:function(){const e=this.commands.map(e=>{const[t,n]=e;return n}),t={};e.forEach(e=>{const n=e.split(","),[o,r]=[n.shift(),n.join(", ")];t[o]=r}),console.table(t)},setValue:function(e){return this.state.solveMode?this.solveCode(e):this.state.prefMode?this.setPreference(e):console.invalid("setValue _() called out of context.")}};window._=j.setValue.bind(j),j.bindInitialCommands();var T=j;window.CONSOLE_GAME_DEBUG=!0,window.onload=()=>{return localStorage.getItem("ConsoleGame.prefMode")?(localStorage.removeItem("ConsoleGame.prefMode"),T._resume()):T.intro()},window.scroll(0,0);t.default=T}]);
//# sourceMappingURL=console_game.js.map